(window.webpackJsonp=window.webpackJsonp||[]).push([["audio_player_mini"],{6:function(e,t,i){e.exports=i("hELJ")},TxnK:function(e,t,i){"use strict";i.r(t),i.d(t,"AudioPlayerBase",(function(){return d}));var a=i("dI71"),n=i("2mXy"),s=i("rEJs"),o=i("J8bf"),r=i("vkmG"),u=i("DM2o"),d=function(e){function t(){var t;return(t=e.call(this)||this).AUDIO_COOKIE="remixcurr_audio",t.AUDIO_PLAYER_CLASS="vk_audio_player",t.STAT_KEY="mvk_audio_player",t.audio=window.audio,t.state=t.getState(),t.setState({expanded:!1}),t.audio.subscribe(s.events.PLAY,(function(){return t.updateState()})),t.audio.subscribe(s.events.PLAY_REQUESTED,(function(){return t.updateState()})),t.audio.subscribe(s.events.PAUSE,(function(){return t.updateState()})),t.audio.subscribe(s.events.SEEK,(function(){return t.updateState()})),t.audio.subscribe(s.events.PROGRESS,(function(){return t.updateProgress()})),t.audio.subscribe(s.events.STOP,(function(){return t.updateState()})),t.audio.subscribe(s.events.PLAYLIST_CHANGED,(function(){t.audio.shuffled&&t.audio.shuffle(),t.audio.canRepeat||t.audio.repeat(),t.updateState()})),t.audio.subscribe(s.events.AD_READY,(function(){return t.updateState()})),t.audio.subscribe(s.events.AD_DEINITED,(function(){return t.updateState()})),t.audio.subscribe(s.events.AD_STARTED,(function(){return t.updateState()})),t.audio.subscribe(s.events.AD_COMPLETED,(function(){return t.updateState()})),window.page.onChange((function(){return t.updateState()})),t}Object(a.default)(t,e);var i=t.prototype;return i.updateProgress=function(){var e=this.audio.getCurrentProgress(),t=this.audio.duration();this.setState({loaded:this.audio.loaded(),progress:e,listened:this.formatTime(e*t),remained:this.formatTime(-(t-e*t))})},i.updateState=function(){this.setState(this.getState())},i.getState=function(){var e=this,t=this.audio.getCurrent()||{},i=t.title,a=t.subTitle,n=t.performer,s=t.mainArtists,u=t.featArtists,d=t.isExplicit,l=t.fullId,c=t.coverUrl_p,p=t.coverUrl_s;Object(o.setCookie)(this.AUDIO_COOKIE,l,1),i?document.body.classList.add(this.AUDIO_PLAYER_CLASS):document.body.classList.remove(this.AUDIO_PLAYER_CLASS);var f=this.audio.getCurrentProgress(),_=this.audio.duration();return{title:Object(r.decodeHTMLEntities)(i||""),subtitle:Object(r.decodeHTMLEntities)(a||""),performer:Object(r.decodeHTMLEntities)(n||""),mainArtists:this.prepareArtists(s),featArtists:this.prepareArtists(u),cover:c||p||"",explicit:d||!1,loaded:this.audio.loaded(),progress:f,listened:this.formatTime(f*_),remained:this.formatTime(-(_-f*_)),playing:this.audio.isPlaying(),adsplaying:this.audio.isAdsPlaying(),canRepeat:this.audio.canRepeat,shuffled:this.audio.shuffled,show:!!i||this.audio.isAdsPlaying(),onPlay:function(){return e.onPlay()},onPause:function(){return e.onPause()},onPrev:function(){return e.onPrev()},onNext:function(){return e.onNext()},onClose:function(){return e.onClose()},onShuffle:function(){return e.onShuffle()},onDisableAds:function(){return e.onDisableAds()},onRepeat:function(){return e.onRepeat()},onGoToCurrentPlaylist:function(){return e.onGoToCurrentPlaylist()}}},i.prepareArtists=function(e){return e?e.map((function(e){return[e.id,Object(r.decodeHTMLEntities)(e.name)]})):[]},i.onPlay=function(){Object(u.statlogsValueEvent)(this.STAT_KEY,"play",this.state.expanded),this.audio.play()},i.onPause=function(){Object(u.statlogsValueEvent)(this.STAT_KEY,"pause",this.state.expanded),this.audio.pause()},i.onClose=function(){var e=this;Object(u.statlogsValueEvent)(this.STAT_KEY,"close",this.state.expanded),this.audio.clearCurrentPlaylist(),requestAnimationFrame((function(){Object(o.setCookie)(e.AUDIO_COOKIE,"",-1),e.setState({title:"",subtitle:"",performer:"",explicit:!1,progress:0,playing:!1,adsplaying:!1,show:!1,expanded:!1}),document.body.classList.remove(e.AUDIO_PLAYER_CLASS)}))},i.onPrev=function(){this.audio.isAdsPlaying()||(Object(u.statlogsValueEvent)(this.STAT_KEY,"prev",this.state.expanded),this.audio.prev(!0))},i.onNext=function(){this.audio.isAdsPlaying()||(Object(u.statlogsValueEvent)(this.STAT_KEY,"next",this.state.expanded),this.audio.next(!0))},i.onShuffle=function(){this.audio.isAdsPlaying()||(Object(u.statlogsValueEvent)(this.STAT_KEY,"shuffle",this.state.expanded),this.audio.shuffle(),this.updateState())},i.onDisableAds=function(){Object(u.statlogsValueEvent)(this.STAT_KEY,"disable_ads",this.state.expanded),this.audio.pause(),nav.go("/offermusic")},i.onRepeat=function(){this.audio.isAdsPlaying()||(Object(u.statlogsValueEvent)(this.STAT_KEY,"repeat",this.state.expanded),this.audio.repeat(),this.updateState())},i.onGoToCurrentPlaylist=function(){Object(u.statlogsValueEvent)(this.STAT_KEY,"go_to_current_playlist",this.state.expanded),window.audioplayer.openPlayer(document.querySelector(".leftMenu .AudioPlayerMini"))},i.formatTime=function(e){var t=Math.abs(e);return(e<0?"-":"")+[Math.floor(t/3600),Math.floor(t/60)%60,Math.floor(t%60)].map((function(e){return e<10?"0"+e:e})).filter((function(e,t){return"00"!==e||t>0})).join(":")},t}(n.Component)},Y6JH:function(e,t,i){"use strict";i.r(t);var a=i("fdw3");var n=function(e,t){void 0===t&&(t=""),Object(a.isObject)(e)?(t=e.name?e.name:"",e=e.sprite?e.sprite:""):e||(e="common");var i=e.split("/").join("-");return{class:"svgIcon svgIcon-"+i+" svgIcon-"+i+"__"+t,tag:"div"}};t.default=n;window.SVGIcon=n},hELJ:function(e,t,i){"use strict";i.r(t);var a=i("wx14"),n=i("dI71"),s=i("TYsd"),o=i("z9sQ"),r=i("fdw3"),u=i("Y6JH");var d=function(e){var t=e.show,i=e.adsplaying,a=i?Object(r.getLang)("mobile_audio_player_ad"):e.title,n=i?"":e.subtitle,s=i?"":e.performer,d=e.explicit,l=e.playing,c=e.onPlay,p=e.onPause,f=e.onNext,_=e.onGoToCurrentPlaylist;if(!t)return"";var A=o.default.class("AudioPlayerMini__controls",{playing:l},"--"),b=a?{inner:[a],class:"AudioPlayerMini__title",tag:"span"}:"",h=n?{inner:[n],class:"AudioPlayerMini__subtitle",tag:"span"}:"",E=!i&&d?{inner:[Object(u.default)({sprite:"audio_player",name:"explicit_gray_13"})],class:"AudioPlayerMini__explicit",tag:"span"}:"",y=l?"AudioPlayerMini__pause":"AudioPlayerMini__play",g=l?"pause_blue_24":"play_blue_24",v=l?p:c,P=l?Object(r.getLang)("mobile_audio_player_pause"):Object(r.getLang)("mobile_audio_player_play");return{inner:[{inner:[{inner:[Object(u.default)({sprite:"audio_player",name:g})],class:y,onClick:v,"aria-label":P,tag:"button"}],class:A,tag:"div"},{inner:[{inner:[b,h,E],class:"AudioPlayerMini__info1",tag:"div"},{inner:[{inner:[s],class:"AudioPlayerMini__performer",tag:"span"}],class:"AudioPlayerMini__info2",tag:"div"}],class:"AudioPlayerMini__info",role:"button",tabindex:"0","aria-label":Object(r.getLang)("mobile_audio_player_show_playlist"),onClick:_,tag:"div"},{inner:[{inner:[Object(u.default)({sprite:"audio_player",name:"next_blue_28"})],class:"AudioPlayerMini__next",onClick:f,"aria-label":Object(r.getLang)("mobile_audio_player_next"),disabled:i,tag:"button"}],class:"AudioPlayerMini__controls",tag:"div"}],class:"AudioPlayerMini__container",tag:"div"}},l=function(e){function t(){return e.apply(this,arguments)||this}return Object(n.default)(t,e),t.prototype.render=function(){return s.default.preact(d,Object(a.default)({},this.state))},t}(i("TxnK").AudioPlayerBase),c=i("2mXy");function p(){if(window.audio&&window.audioplayer){var e=$$(".AudioPlayerMini");e&&0!==e.length&&e.forEach((function(e){return Object(c.render)(Object(c.createElement)(l,Object(r.getState)("AudioPlayerMini")),e)}))}}onDOMReady(p),window.page&&page.onChange(p)},rEJs:function(e,t,i){"use strict";i.r(t),i.d(t,"events",(function(){return a}));var a={CURRENT_CHANGED:"curr",PLAY:"start",PLAY_REQUESTED:"request_play",PAUSE:"pause",STOP:"stop",UPDATE:"update",LOADED:"loaded",ENDED:"ended",FAILED:"failed",BUFFERED:"buffered",PROGRESS:"progress",VOLUME:"volume",PLAYLIST_CHANGED:"plchange",ADDED:"added",REMOVED:"removed",FREQ_UPDATE:"freq",SEEK:"seek",PLAY_NEXT:"play_next",AD_READY:"ad_ready",AD_DEINITED:"ad_deinit",AD_STARTED:"ad_started",AD_COMPLETED:"ad_completed",START_LOADING:"start_load",CAN_PLAY:"actual_start",SELECT:"select",DESELECT:"deselect",EMPTY_PLAYLIST:"empty_playlist",NOT_FOUND_PLAYLIST:"not_found_playlist",INIT:"init"}},z9sQ:function(e,t,i){"use strict";i.r(t);i("OcsD");var a={class:function(e,t,i){void 0===t&&(t={});void 0===i&&(i="_");var a=[e];return Object.keys(t).forEach((function(s){if(n(s)){var o=t[s];!0===o?a.push(""+e+i+s):n(o)&&a.push(""+e+i+s+i+o)}})),a.join(" ")},setMod:function(e,t,i){var a,s=new RegExp("\\s*"+t+"(_[-a-zA-Z]+)?");a=!0===i?" "+t:n(i)?" "+t+"_"+i:"";s.test(e.className)?e.className=e.className.replace(s,a):e.className+=a}};function n(e){return"number"==typeof e||"string"==typeof e&&e}t.default=a;window.Bem=a}},[[6,"runtime","vendors","b-a8f7cf0af671e2a555da7b25524b9a42","b-35216c87a51105ca4c1dd702437ad9c1"]]]);