(window.webpackJsonp=window.webpackJsonp||[]).push([["vkapps"],{"0hva":function(e,t,n){"use strict";n.r(t),n.d(t,"initAlbumPage",(function(){return f}));var a=n("vOib"),o=n("1VZq"),r=n("z1UI"),i=n("O5lf"),s=(n("tlMv"),n("z9sQ"));var c,l,d,u,_=function(e){void 0===e&&(e={});var t=window.lang,n=e.title||"",c=e.description||"",l=e.pretag,d=e.buttons||{},u=(e.photos||[]).map((function(e){return Object(o.default)({photo:e})})),_=null;if(e.is_loading)_=Wd.wrap(Object(i.default)({mix:"al_loading",type:"pageLoader"}));else{if(!u.length)return Object(r.default)({separator:!0,more_text:e.add_url?t.mobile_photos_placeholder_album_action:null,more_type:"primary",more_url:e.add_url,text:t.mobile_photos_placeholder_album_text});_={inner:[u],class:"AlbumPage__photos photos_page",tag:"div"}}var p=s.default.class("AlbumPage",{withoutDescription:!c},"--");return{inner:[Object(a.default)({inner:[{inner:[{inner:[n],class:"AlbumPage__title",tag:"h2"},c&&{inner:[c],class:"AlbumPage__description",tag:"span"}],class:"AlbumPage__info",tag:"div"},d.prev,_,d.more,l]})],class:p,tag:"div"}},p=n("OcsD");function f(){var e=$("#mhead");Object(p.getH)(e);$(".AlbumPage")&&(c=!1,l=!1,d=!1,u=!1,Object(p.onBodyScroll)(b),Object(p.onBodyScroll)(!0))}function b(){if(c||(c=$(".AlbumPage__title"),l=Object(p.getH)(c)),d||(d=$(".header__title",$("#mhead"))),!d)return Object(p.onBodyScroll)("__clear",b);u||(u=$(".header__text",d));var e=Math.min(40,Math.max(0,getY(c)-l-scrollTop()));p.setStyle.transform(u,1,[0,e]),d.classList.toggle("header__title--initial-position",0===e)}var v=n("Cbap");v.default.getRouter().addRoute(/\/(?:album|tag)(-?\d+(?:_\d+)?)/,f),v.default.getRouter().addRoute(/\/(?:attachments\?act=choose_photo).*(?:album|tag)=(-?\d+(?:_\d+)?)/,f);t.default=_},"1VZq":function(e,t,n){"use strict";n.r(t);var a=n("Y6JH");var o=function(e){var t,n=e.photo,o=n.restriction;if(o&&"block"===o.type)t={inner:[{inner:[Object(a.default)({sprite:"wall",name:"do_not_disturb_outline_56"})],class:"PhotosPhotoItem__restriction",tag:"div"}],class:"_image PhotosPhotoItem__photo",tag:"div"};else{var r=["_image",Bem.class("PhotosPhotoItem__photo",{blur:o&&"blur"===o.type},"--")];t={inner:[o&&o.type?{inner:[Object(a.default)({sprite:"wall",name:"hide_outline_56"})],class:"PhotosPhotoItem__restriction",tag:"div"}:null],style:"background-image: url("+n.src+")",attrs:n.attrs,class:r,tag:"div"}}return{inner:[t],href:n.href,class:"PhotosPhotoItem "+n.class,onclick:n.onclick,tag:"a"}};t.default=o},23:function(e,t,n){e.exports=n("uouo")},"29dZ":function(e,t,n){"use strict";n.r(t);var a=n("UvyM"),o=n("myok");Object.assign(a.default,o.default),window.Btn=a.default,t.default=a.default},"2IoG":function(e,t,n){"use strict";n.r(t);var a=n("MUpH"),o=n("bZ/P");function r(){var e=Object(a.default)(["\n    <",' class="','" '," ",">\n      ","\n    </",">\n  "]);return r=function(){return e},e}t.default=function(e){void 0===e&&(e={});var t,n,a=o.default.list(e.inner);e.url?(t="a",n=o.default.attr("href",e.url)):(t=e.tag||"div",n="");return o.default.html(r(),t,e.mix,n,e.attrs,a,t)}},"8ZMO":function(e,t,n){"use strict";n.r(t);var a=function(e){return{class:["Anchor",e.mix],id:e.id,tag:"div"}};t.default=a},"9y81":function(e,t,n){"use strict";n.r(t),n.d(t,"IconWd",(function(){return i}));var a=n("bZ/P"),o=n("Mc5h"),r=function(e){var t,n=e.icon,r=e.class||e.mix;return Object(o.default)({mix:a.default.class(r,"Icon",(t={},t[n]=!0,t.active=e.active,t.blue=e.blue,t.bluer=e.bluer,t.dark=e.dark,t.selected=e.selected,t.small=e.small,t.white=e.white,t)),url:e.url,attrs:e.attrs})};function i(e){var t,n=e.icon;return{class:[e.class,Bem.class("Icon",(t={},t[n]=!0,t.active=e.active,t.blue=e.blue,t.bluer=e.bluer,t.dark=e.dark,t.selected=e.selected,t.small=e.small,t.white=e.white,t))],href:e.url,attrs:e.attrs}}Object.assign(r,{toggleActive:function(e){e.classList.toggle(s)}});var s="Icon_active";t.default=r;window.Icon=r},BoyB:function(e,t,n){"use strict";n.r(t);var a=n("TYsd"),o=n("z9sQ"),r=n("Y6JH"),i=function(e){void 0===e&&(e={});var t=[e.class||e.mix,o.default.class("Loading",{white:e.white,large:e.large,spinner:e.spinner})];if(e.spinner)return a.default.html({inner:[Object(r.default)({sprite:"base",name:"spinner_16"})],class:t,tag:"div"});return a.default.html({class:t,inner:{class:"Loading__items",inner:[{class:"Loading__item Loading__item_0"},{class:"Loading__item Loading__item_1"},{class:"Loading__item Loading__item_2"}]}})};t.default=i;window.Loading=i},Cbap:function(e,t,n){"use strict";n.r(t);var a=function(){function e(){this.routes=[]}e.getRouter=function(){return window.router||(window.router=new e),window.router};var t=e.prototype;return t.addRoute=function(e,t,n){this.routes.push({isActive:!1,test:e,activateCallback:t,deactivateCallback:n})},t.test=function(e){var t=e.test;if(nav.cur)return"function"==typeof t?t(window.nav.cur):t instanceof RegExp?t.test(window.nav.cur):!(!window.nav.cur||"string"!=typeof t)&&window.nav.cur.startsWith(t)},t.deactivateAllRoutes=function(){this.routes=this.routes.map((function(e){return e.isActive=!1,e.deactivateCallback&&e.deactivateCallback(),e}))},t.checkRoutes=function(){var e=this;this.routes=this.routes.map((function(t){var n=e.test(t);return n&&t.activateCallback&&t.activateCallback(),!n&&t.isActive&&t.deactivateCallback&&t.deactivateCallback(),t.isActive=n,t}))},e}();t.default=a,window.Router=a},GVTI:function(e,t,n){"use strict";n.r(t),n.d(t,"_PhotoviewPage_tags",(function(){return p}));var a=n("vOib"),o=n("rc7J"),r=n("fdw3"),i=n("29dZ"),s=n("vk58"),c=n("Q8gl"),l=n("O5lf"),d=n("vhZE");function u(e){var t="wi_like_wrap";e.liked_people||(t+=" is_empty");var n="PhotoviewPage__description";return e.photo.description||(n+=" PhotoviewPage__description--empty"),{inner:[e.photo.caption?{inner:[Wd.wrap(e.photo.caption)],class:"PhotoviewPage__caption",tag:"div"}:null,{inner:[Wd.wrap(e.photo.description)],class:n,tag:"div"},{inner:[e.liked_people?e.liked_people:null],class:t,tag:"div"},e.buttons?{inner:[{inner:[e.buttons],class:"wi_buttons",tag:"div"}],class:"wi_buttons_wrap",tag:"div"}:null,e.author,e.replies],class:"PhotoviewPage__footer",tag:"div"}}function _(e){var t=window.lang;return{inner:[{inner:[e.edit_data.rotate.can_rotate?Object(s.default)({inner:[Object(i.default)({inner:[t.mobile_photos_edit_rotate_left],url:e.edit_data.rotate.left,stretch:!0}),Object(i.default)({inner:[t.mobile_photos_edit_rotate_right],url:e.edit_data.rotate.right,stretch:!0})],nowrap:!0}):null,{inner:[{inner:[t.mobile_photos_edit_desc_label],class:"fi_label",tag:"dt"},{inner:[{inner:[e.photo.description],name:"text",class:"textfield",rows:"4",tag:"textarea"}],class:"iwrap",tag:"dd"}],class:"fi_row",tag:"dl"},{inner:[{inner:[t.mobile_photos_edit_album_label],class:"fi_label",tag:"dt"},{inner:[{inner:[e.edit_data.albums.map((function(e){return{inner:[e.name],selected:e.selected?"selected":null,value:e.id,tag:"option"}}))],name:"aid",tag:"select"},{inner:[Object(c.default)({withoutWrap:!0,name:"cover",label:t.mobile_photos_edit_cover_label,type:"checkbox"})],class:"fi_subrow",tag:"div"}],class:"iwrap",tag:"dd"}],class:"fi_row",tag:"dl"},{inner:[Object(s.default)({inner:[Object(i.default)({inner:[t.mobile_photos_edit_save_btn],type:"submit"}),Object(i.default)({inner:[t.mobile_cancel],theme:"link",url:e.edit_data.back_url})]})],class:"fi_row",tag:"div"}],action:e.edit_data.action,method:"post",tag:"form"}],class:"form_item",tag:"div"}}function p(e){return void 0===e&&(e=[]),{inner:[Object.keys(e).map((function(t){return{inner:[{class:"fill",tag:"div"}],class:"pv_tag",id:"pv_tag"+t,style:function(e){if(!Object(r.isArray)(e))return"";var t=e[0];return Object(r.isArray)(t)?"left: "+t[0]+"%; top: "+t[1]+"%; width: "+t[2]+"%; height: "+t[3]+"%":""}(e[t]),tag:"div"}}))],class:"PhotoviewPage__tags",tag:"div"}}var f=function(e){void 0===e&&(e={});var t=e.info||{},n=e.photo||{},i=e.is_loading||!1,s=e.navigation_buttons||{},c=Object(r.concatValues)("PhotoviewPage ",e.class);e.info&&(e.author=Object(o.default)({url:t.url,author_url:t.author_url,avatar:t.avatar,title:t.title,subtitle:t.subtitle,withoutBottomBorder:!e.has_replies})),e.photo||(e.photo={}),e.photo.description||(e.photo.description="");var f,b="",v=null;i&&(c=Object(r.concatValues)(c," PhotoviewPage--skeleton"),n.width?b+=" width"+e.width+"px;":v=Wd.wrap(Object(l.default)({mix:"al_loading",type:"pageLoader"})));var m=["PhotoviewPage__photo"];e.photo.restriction&&("block"===e.photo.restriction.type?m.push("PhotoviewPage__photo--block"):"blur"===e.photo.restriction.type&&m.push("PhotoviewPage__photo--blur")),f=[{src:n.src,style:b,tag:"img"},p(e.tags)];var h,g=!!e.photo.restriction;return g&&((h=e.photo.restriction).width=e.width,h.height=e.height||e.width),Object(a.default)({inner:[{inner:[{inner:[v||{inner:[f],class:m,href:n.href,tag:"a"},{inner:[Object(d.default)(h)],class:"PhotoviewPage__restrictedInfo",style:g?"":"display: none;",tag:"div"},s],class:"PhotoviewPage__thumb",tag:"div"},e.edit_mode?_(e):u(e)],id:e.photo.id,tag:"div"}],class:c})};t.default=f},GtpT:function(e,t,n){"use strict";n.r(t),n.d(t,"getDataFromDOM",(function(){return i}));var a=n("Y6JH");var o=function(e){var t,n=e.album,o=n.url,r=n.title,i=n.photos_count_label,s=n.restriction,c="AlbumItem al_album";n.thumb?t=n.thumb:s||(c+=" AlbumItem--empty");var l,d="";if(s){var u={};u[s.type]=!0,d=Bem.class("AlbumItem__restriction",u,"--")}if(s&&"geo"===s.type)l={inner:[{inner:[Object(a.default)({sprite:"wall",name:"do_not_disturb_outline_56"})],class:d,tag:"div"}],class:"AlbumItem__thumb",tag:"div"};else{var _=[Bem.class("AlbumItem__thumb",{blur:s&&"blur"===s.type},"--")];l={inner:[s&&s.type?{inner:[Object(a.default)({sprite:"wall",name:"hide_outline_56"})],class:d,tag:"div"}:null],class:_,"data-thumb-id":n.thumb_id,style:"background-image: url("+t+")",tag:"div"}}return{inner:[{inner:[l],class:"AlbumItem__thumbWrap",tag:"div"},{inner:[{inner:[r],class:"AlbumItemInfo__title",tag:"div"},{inner:[i],class:"AlbumItemInfo__subtitle",tag:"div"}],class:"AlbumItemInfo",tag:"div"}],href:o,class:c,onclick:e.onClick,tag:"a"}},r=n("OcsD");function i(e){if(!e.classList.contains("AlbumItem"))return{};var t=Object(r.val)($(".AlbumItemInfo__title",e))||"",n=Object(r.val)($(".AlbumItemInfo__subtitle",e))||"",a=e.getAttribute("href"),o=$(".AlbumItem__thumb",e),i=/url\("(.*)"\)/.exec(o.style.backgroundImage),s=!!i&&i[1],c=$(".AlbumItem__restriction",e),l=!1;return c&&(c.classList.contains("AlbumItem__restriction--blur")?l={type:"blur"}:c.classList.contains("AlbumItem__restriction--geo")&&(l={type:"geo"})),{album:{title:Wd.wrap(t),photos_count_label:n,url:a,thumb:s,restriction:l},onClick:e.getAttribute("onclick")}}t.default=o},I7Du:function(e,t,n){"use strict";n.r(t);var a=n("z9sQ");var o=function(e){void 0===e&&(e={});var t=e.on_change;return{class:[e.mix||e.class,a.default.class("Select",{disabled:e.disabled})],inner:[{class:"Select__native",tag:"select",name:e.name,disabled:e.disabled,onchange:e.nativeOnChange?e.onChange:t?["Select._onChange","this",t]:null,required:e.required,inner:e.options.map((function(e){return e?{class:"Select__option",tag:"option",value:e.value,selected:e.selected?"selected":null,inner:e.label,attrs:e.attrs}:null}))}]}};t.default=o},KiYr:function(e,t,n){"use strict";n.r(t);var a=n("LmmP");t.default=a.default},LmmP:function(e,t,n){"use strict";n.r(t),n.d(t,"Alert",(function(){return o}));var a=n("z9sQ");function o(e){return{inner:[e.title?{inner:[e.title],class:"Alert__title",tag:"div"}:null,{inner:[e.text||e.inner],class:"Alert__description",tag:"div"}],class:[e.class,a.default.class("Alert",{theme:e.theme})].join(" "),tag:"div"}}t.default=o},Mc5h:function(e,t,n){"use strict";n.r(t);var a=n("2IoG");t.default=a.default,window.Brick=a.default},O5lf:function(e,t,n){"use strict";n.r(t);var a=n("9y81"),o=n("Y6JH"),r=n("z9sQ"),i=function(e){void 0===e&&(e={});var t=e.mix||"",n="pageLoader"===(e.type||"gray"),i=r.default.class("Spinner",{pageLoader:n,hidden:e.isHidden,fixed:e.isFixed},"--"),s=t+" "+i;if(n)return Wd.html({inner:[Object(o.default)("wall","loading_40")],class:s,tag:"div"});return Object(a.default)({mix:s,icon:"spinner"})};var s=n("jE6c");var c={show:function(e){Object(s.isElement)(e)&&e.classList.remove("Spinner--hidden")},hide:function(e){Object(s.isElement)(e)&&(e.classList.contains("Spinner--hidden")||e.classList.add("Spinner--hidden"))}};Object.assign(i,c),window.Spinner=i;t.default=i},"Po+v":function(e,t,n){"use strict";n.r(t),t.default=function(e){void 0===e&&(e={});var t=[];if(e.on_overlay_click_native)t=e.on_overlay_click_native;else{var n=!0;"boolean"==typeof e.hide_on_overlay_click&&(n=e.hide_on_overlay_click),t=["Popup._onOverlayClick","this",e.on_overlay_click||null,n]}e.content||(e.content=e.inner);return{id:e.id,class:[e.mix?e.mix:e.class,Bem.class("Popup",{open:e.open,scrollable:e.scrollable})],inner:[e.rel?e.rel:null,{class:"Popup__overlay",onclick:t},{class:"Popup__wrap",inner:{tag:"div",class:"Popup__content",role:"dialog","aria-modal":"true",inner:[e.header?{class:"Popup__header",inner:[e.header.title?{class:"Popup__headerTitle",inner:e.header.title}:null,e.header.corner?{class:["Popup__headerCorner",e.header.corner.class],inner:e.header.corner.text,href:e.header.corner.url,onclick:e.header.corner.onclick,attrs:e.header.corner.attrs}:null]}:null,e.scrollable?{class:"Popup__scroll ScrollView",inner:{class:"Popup__scrollContent",inner:e.content}}:e.content,e.footer?{class:"Popup__footer",inner:e.footer}:null]}}]}}},Q8gl:function(e,t,n){"use strict";n.r(t),n.d(t,"Control_switcher",(function(){return l})),n.d(t,"Control_checkbox",(function(){return s})),n.d(t,"Control_radio",(function(){return c}));var a=n("OcsD"),o=n("z9sQ"),r=n("UWnA"),i=n("fdw3");function s(e){return d(Object(i.extend)(e,{type:"checkbox"}))}function c(e){return d(Object(i.extend)(e,{type:"radio"}))}function l(e){return d(Object(i.extend)(e,{type:"switcher"}))}function d(e){void 0===e&&(e={});var t,n=e.name,a=e.description,s=e.label||e.inner,c=e.type,l=e.checked,d=e.disabled,u=e.on_change||e.onChange,_=e.ariaHiddenLabel?e.ariaHiddenLabel:"true",p="value"in e?e.value:"1",f=[e.class||e.mix,o.default.class("Control",{type:c})],b=e.attrs||[];b=Object(i.extend)({onclick:!0},b),"switcher"===c&&(t="switch");var v=e.name+"_"+p+"_label",m={inner:[{id:e.input_id,class:"Control__native",name:n,value:p,checked:!!l&&"checked",disabled:!!d&&"disabled",type:"switcher"===c?"checkbox":c,onChange:u?["Control._onChange","this",u]:null,"aria-labelledby":s?v:null,role:t,tag:"input"},{class:"Control__icon",tag:"div"},{inner:[{inner:[s],id:v,"aria-hidden":_,tag:"span"},a?{inner:[a],class:"Control__description",tag:"div"}:""],class:"Control__label",tag:"div"}],tag:"div"}.inner;return e.withoutWrap?{inner:[m],class:f,attrs:b,tag:"label"}:(b.role="menuitem",Object(r.default)({inner:[m],tag:"label",class:f,attrs:b}))}var u=d,_=n("TYsd"),p={setChecked:function(e,t){void 0===t&&(t=!0);h(e).checked=t},isChecked:function(e){return h(e).checked}},f=p;p._onChange=m;var b=".Control",v=".Control__native";function m(e,t){_.default.handle(t,{$control:e.closest(b),name:e.name,checked:e.checked,value:e.value})}function h(e){return e.$(v)}var g=Object(a.extend)(u,f);t.default=g;window.Control=g},RQ7Z:function(e,t,n){"use strict";n.r(t),n.d(t,"screenfull",(function(){return a}));var a=function(){var e=function(){for(var e,t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],a=0,o=n.length,r={};a<o;a++)if((e=n[a])&&e[1]in document){for(a=0,t=e.length;a<t;a++)r[n[0][a]]=e[a];return r}return!1}(),t={request:function(t){var n=e.requestFullscreen;(t=t||document.documentElement)[n]()},exit:function(){document[e.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},raw:e};return!!e&&(Object.defineProperties(t,{isFullscreen:{get:function(){return Boolean(document[e.fullscreenElement])}},element:{enumerable:!0,get:function(){return document[e.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(document[e.fullscreenEnabled])}}}),t)}()},UWnA:function(e,t,n){"use strict";n.r(t);var a=n("WWoJ");n.d(t,"Row_labeledSelect",(function(){return a.Row_labeledSelect})),t.default=a.default},UvyM:function(e,t,n){"use strict";n.r(t);var a=n("z9sQ"),o=n("BoyB"),r=n("TYsd"),i=n("fdw3");t.default=function(e){void 0===e&&(e={});var t=e.url,n=e.is_icon,s=e.icon,c=e.tag||"button",l=e.on_click||e.onClick||e.onclick,d=e.use_native_onclick,u=e.inner||e.children;Object(i.isArray)(u)&&1===u.length&&"string"==typeof u[0]&&(u=u[0]);var _=!1;"function"==typeof l&&(d=!0,_=!0);l&&!d&&(l=["Btn._onClick","event","this",l]);var p={class:[e.class,a.default.class("Btn",{theme:e.theme||"regular",size:e.size||"",stretch:e.stretch})],onclick:l,attrs:e.attrs};_&&(p.onClick=l,delete p.onclick);var f=e.hide?"; display: none;":"",b=e.style?e.style+f:f,v=null;e.isLoading&&(p.class.push("Btn_loading"),v=r.default.wrap(Object(o.default)({mix:"Btn__loader",white:"secondary"===e.theme?"white":"",large:!0,spinner:e.spinner})));if(t)return Object(i.mergeObjects)(p,{_:r.default.getInternalData(),tag:"a",href:t,role:"button",style:b,inner:s?[{class:"Btn__icon",inner:s},{class:"Btn__text",inner:u}]:n?u:{class:"Btn__text",inner:u},target:(e.open_in_new_tab?"_blank":e.target)||""});var m=e.is_submit?"submit":null,h=e.type||m;return Object(i.mergeObjects)(p,{_:r.default.getInternalData(),"aria-label":e["aria-label"]||"",tag:c,style:b,disabled:e.disabled,type:h,inner:s?[v,{class:"Btn__icon",inner:s},{class:"Btn__text",inner:u}]:n?[v,u]:[v,{class:"Btn__text",inner:u}]})}},V4qE:function(e,t,n){"use strict";n.r(t),n.d(t,"init",(function(){return w})),n.d(t,"close",(function(){return k})),n.d(t,"SNACKBAR_POSITION_COMMON",(function(){return _})),n.d(t,"SNACKBAR_POSITION_MAIL",(function(){return p})),n.d(t,"SNACKBAR_TYPE_SUCCESS",(function(){return v})),n.d(t,"SNACKBAR_TYPE_ERROR",(function(){return m})),n.d(t,"SNACKBAR_TYPE_BOOKMARK",(function(){return h})),n.d(t,"SNACKBAR_TYPE_BULLYING",(function(){return g}));var a=n("z9sQ"),o=n("29dZ"),r=n("Y6JH"),i=n("fdw3"),s=function(e){void 0===e&&(e={});var t=e.position||"bottom",n=!(!e.type||e.image),s={class:a.default.class("SnackbarItem__cell",{left:!0,image:!!e.image,top:e.avatar&&"left"===e.avatar_position,icon:n})},c={class:a.default.class("SnackbarItem__cell",{right:!0,avatar:!!e.avatar})},l=!1,d=!1;if(e.type){l=!0;var u=null;switch(e.type){case 1:u=Object(r.default)("common","snackbar_done_24");break;case 2:u=Object(r.default)("common","snackbar_error_24");break;case 3:u=Object(r.default)("common","favorites_24");break;case 4:u=Object(r.default)("wall","error_fill_24")}s.inner={class:"SnackbarItem__icon",inner:u}}e.image&&(l=!0,s.inner={class:"SnackbarItem__image",inner:{tag:"img",src:e.image}});e.action&&(d=!0,c.inner=Object(o.default)({theme:"none",class:"SnackbarItem__action",url:e.action.url,target:e.action.target,on_click:e.action.onclick,use_native_onclick:!0,inner:Wd.wrap(e.action.text),attrs:e.action.attrs}));if(e.avatar){var _={tag:"img",class:"SnackbarItem__avatar",src:e.avatar};e.avatar_position&&"right"!==e.avatar_position?"left"===e.avatar_position&&(l=!0,s.inner=_):(d=!0,c.inner=_)}return{style:e.style?e.style:"",class:Object(i.concatValues)("SnackbarItem_"+e.id+" SnackbarItem--"+t+" ",a.default.class("SnackbarItem",{static:!!e.static,vertical:!!e.vertical,hasIcon:n},"--")),attrs:{"data-snackbar-id":e.id},inner:[{class:"SnackbarItem__table",inner:[l?s:null,e.text?{class:a.default.class("SnackbarItem__cell",{text:!0}),inner:{class:"SnackbarItem__text",inner:Object(i.isObject)(e.text)?e.text:Wd.wrap(e.text)}}:null,d?c:null]}]}};var c=n("OcsD"),l=n("UxAg"),d=n("kr3z"),u=n("zq7H");window.Snackbar={init:w,close:k,_onActionClick:function(e,t){var n=b[t];if(!n)return void Object(c.hide)(t);var a=n.callback,o=n.url;a?"function"==typeof a?a.call(null,e,{id:t,url:o}):Wd.handle2(a,e,{id:t,url:o}):Object(c.hide)(t)},_onRestoreClick:function(e,t,n){var a=t.closest(".SnackbarItem"),o=Object(c.domData)(a,"snackbar-id"),r=b[o];e.stopPropagation(),e.preventDefault();var i=r.callback;i&&("function"==typeof i?i.call(null,e,{id:o,url:n}):Wd.handle2(i,e,{id:o,url:n}));k(o),d.default.click(n,null,{url_params:{_ajax:1,_snackbar:1}})}};var _="common",p="mail",f=0,b={},v=1,m=2,h=3,g=4,O=[];function w(e){var t=isFinite(e.duration)?e.duration:5e3,n=f++,a=e.action&&e.action.callback,o=e.action&&e.action.url;e.position=e.position||_;var r=e.position;e.id=n,a&&!e.action.onclick&&(e.action.onclick=["Snackbar._onActionClick","event",n]),e.bottom&&(e.style="bottom: "+e.bottom+"px");var i,s=Wd.elem(SnackbarItem(e));return function(e,t){if(t.position===_)Object(c.append)(e,document.body);else if(t.position===p){var n="msg"===window.store.mail.cur.page?Object(l.$)(".messenger__layer_page .messenger__header"):Object(l.$)(".messenger__layer_convo .messenger__header");Object(c.append)(e,n)}setTimeout((function(){e.classList.add("SnackbarItem_added")}),100)}(s,e),t&&(i=y(n,t)),Object(c.addEvent)(s,"touchstart",L,{passive:!0}),Object(c.addEvent)(s,"touchmove",E,{capture:!1}),Object(c.addEvent)(s,"touchcancel touchend",I,{passive:!0}),b[n]={id:n,timer:i,callback:a,url:o,duration:t,position:r},O.push(n),j(),n}function j(){var e=(O=O.filter((function(e){var t=b[e],n=x(e);return!(!t||!n)}))).reduce((function(e,t){var n=b[t];return e[n.position]||(e[n.position]=[]),e[n.position].push(t),e}),{});Object.keys(e).forEach((function(t){var n=e[t],a=0,o=t===p?8:12;n.forEach((function(e,n){var r=x(e),i=Object(c.getH)(r);b[e].vertical=t===p?a:-a,c.setStyle.transform(r,1,[0,b[e].vertical]),a+=i+o}))}))}function y(e,t){return setTimeout((function(){k(e,!1)}),t)}function k(e,t){var n=b[e],a=x(e);n&&(n.timer&&clearTimeout(n.timer),delete b[e]),a&&function(e,t){if(Object(c.removeEvent)(e,"touchstart",L,{passive:!0}),Object(c.removeEvent)(e,"touchmove",E,{capture:!1}),Object(c.removeEvent)(e,"touchcancel touchend",I,{passive:!0}),t)return Object(c.remove)(e),void j();e.classList.add("SnackbarItem--closing");if(!e)return;e.classList.add("SnackbarItem_removed"),setTimeout((function(){Object(c.remove)(e),j()}),600)}(a,t)}function x(e){return Object(l.$)(".SnackbarItem_"+e)}onDOMReady((function(){onBodyResize(j)}));var B=!1,C=null,A=!1,S=0,M=!1,P=Object(c.getCw)();function L(e){if(P=Object(c.getCw)(),e.touches&&e.touches.length>1)B=!1;else{var t=e.target.closest(".SnackbarItem");t.classList.add("SnackbarItem--dragging");var n=Object(c.domData)(t,"snackbar-id");if(P>=u.DESKTOP_WIDTH&&(M=!0),b[n].position===p){M=!1;var a=Object(l.$)(".messenger");P=Object(c.getW)(a),b[n].parentXY=Object(c.getXY)(a)}else b[n].parentXY=Object(c.getXY)(bodyNode);b[n].timer&&clearTimeout(b[n].timer),C=e.touches[0],S=e.touches[0].clientX,B=!0,A=n,document.body.style.overflow="hidden"}}function E(e){var t=A;if(e.preventDefault(),e.touches&&e.touches.length>1)B=!1;else if(C&&B){var n=e.touches[0],a=e.target.closest(".SnackbarItem"),o=-(S-n.clientX);M&&(o=Math.min(o,0));var r=Object(c.getX)(a),i=(Object(c.getW)(a)+o)/2+r-b[t].parentXY[0],s=i>=.95*P||i<=P/.95-P;b[t].canClose=s,c.setStyle.transform(a,1,[o,b[t].vertical])}}function I(e){var t=e.target.closest(".SnackbarItem");t.classList.remove("SnackbarItem--dragging");var n=Object(c.domData)(t,"snackbar-id"),a=b[n];if(b[n].dragging=!1,A=!1,document.body.style.overflow="visible",a.canClose){var o=Object(c.getX)(t)>0?Object(c.getCw)():-Object(c.getCw)();return Object(c.getCw)()>=u.DESKTOP_WIDTH&&(o=Object(c.getX)(t)>Object(c.getCw)()/2?Object(c.getCw)():-Object(c.getCw)()),c.setStyle.transform(t,1,[o,b[n].vertical||0]),void k(n)}b[n].timer=y(n,a.duration),t&&c.setStyle.transform(t,1,[0,b[n].vertical||0])}t.default=s;window.SnackbarItem=s},WWoJ:function(e,t,n){"use strict";n.r(t),n.d(t,"Row",(function(){return l})),n.d(t,"Row_btn",(function(){return d})),n.d(t,"Row_labeledText",(function(){return u})),n.d(t,"Row_labeledInput",(function(){return _})),n.d(t,"Row_labeledSelect",(function(){return p}));var a=n("8ZMO"),o=n("p5n7"),r=n("I7Du"),i=n("9y81"),s=n("29dZ"),c=n("z9sQ");function l(e){void 0===e&&(e={});var t=e.anchor,n=e.attrs||{},o=e.style||{},r=e.url,s=e.count,l=r&&!o.no_go_icon&&!s,d=e.tag;d||(d=r?"a":"div");var u=null;return l?u=Wd.wrap(Object(i.default)({mix:"Row__right",icon:"chevron_right"})):s&&(u={inner:[s],class:"Row__right Row__count",tag:"div"}),{class:[e.mix||e.class,c.default.class("Row",{go:l,style_withBorder:o.with_border,style_withBorderForce:o.with_border_force,style_withHover:o.with_hover,style_smallPaddings:o.small_paddings,style_noPaddingTop:o.no_padding_top,style_noPaddingBottom:o.no_padding_bottom,style_tinyPaddingTop:o.tiny_padding_top,style_tinyPaddingBottom:o.tiny_padding_bottom,paddingTop_short:o.padding_top_short})],tag:d,href:r,attrs:n,role:e.role,inner:[t?Object(a.default)({id:t}):null,u,e.icon?{inner:[e.icon],class:"Row__icon "+e.icon_class,tag:"div"}:null,e.content||e.inner]}}function d(e){return l({content:Object(s.default)(e)})}function u(e){return f({anchor:e.anchor,url:e.url,label:e.label,content:e.text,is_mini:!0})}function _(e){return f({anchor:e.anchor,label:e.label,style:e.style,content:Object(o.default)(e)})}function p(e){return f({anchor:e.anchor,style:e.style,label:e.label,content:Object(r.default)(e)})}function f(e){return l({anchor:e.anchor,url:e.url,style:e.style,content:[b({is_mini:e.is_mini,label:e.label}),v({content:e.content})]})}function b(e){return{inner:[e.label],class:[c.default.class("Row__label",{mini:e.is_mini}),e.class||""].join(" "),tag:"div"}}function v(e){return{inner:[e.content],class:["Row__labeledContent",e.class||""].join(" "),tag:"div"}}t.default=l},Y6JH:function(e,t,n){"use strict";n.r(t);var a=n("fdw3");var o=function(e,t){void 0===t&&(t=""),Object(a.isObject)(e)?(t=e.name?e.name:"",e=e.sprite?e.sprite:""):e||(e="common");var n=e.split("/").join("-");return{class:"svgIcon svgIcon-"+n+" svgIcon-"+n+"__"+t,tag:"div"}};t.default=o;window.SVGIcon=o},"bZ/P":function(e,t,n){"use strict";n.r(t);var a={};function o(e,t){return e+'="'+t+'"'}function r(e){return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return o(e,i(n))}}function i(e){return e[0]+"("+e.slice(1).map(s).join(", ")+")"}function s(e){return"number"==typeof e||"event"===e||"this"===e?e:JSON.stringify(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c(e,t){var n,a=[];"string"==typeof t&&((n={})[t]=!0,t=n);return Object.keys(t).forEach((function(n){var o=t[n];!0===o?a.push(e+"_"+n):o&&a.push(e+"_"+n+"_"+o)})),a}Object.assign(a,{html:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var o="";return e.forEach((function(e,t){var a=n[t];o+=e+(a||0===a?a:"")})),o}}),Object.assign(a,{attr:o,onBlur:r("onblur"),onClick:r("onclick"),onFocus:r("onfocus"),onInput:r("oninput"),onKeyDown:r("onkeydown"),onKeyPress:r("onkeypress"),onKeyUp:r("onkeyup"),onMouseDown:r("onmousedown"),onMouseUp:r("onmouseup"),onScroll:r("onscroll"),onSubmit:r("onsubmit"),onTouchEnd:r("ontouchend"),onTouchMove:r("ontouchmove"),onTouchStart:r("ontouchstart"),onWheel:r("onwheel"),onChange:r("onchange")}),Object.assign(a,{list:function(e,t){void 0===t&&(t=null);Array.isArray(e)||(e=[e]);return t?e.map(t).join(""):e.join("")}}),Object.assign(a,{class:function(){for(var e=[],t=null,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return a.forEach((function(n){"string"==typeof n?(e.push(n),t=n):n&&(e=e.concat(c(t,n)))})),e.join(" ")},parseClass:function(e,t){var n={};return t.trim().split(/\s+/).forEach((function(t){if(t!==e){var a=t.replace(e+"_","").split("_");n[a[0]]=!(a.length>1)||a[1]}})),n}});t.default=a;window.q=a},cGUQ:function(e,t,n){"use strict";n.r(t),n.d(t,"fromQueryString",(function(){return c})),n.d(t,"toQueryString",(function(){return s}));var a=n("jE6c"),o={},r=function(e){if(o[e])return e;try{return encodeURIComponent(e)}catch(e){return""}},i=function(e){try{return decodeURIComponent(e)}catch(t){return o[e]=1,e}};function s(e,t){var n=[];for(var o in e)if(e.hasOwnProperty(o)&&null!=e[o]&&!Object(a.isFunction)(e[o]))if(Object(a.isArray)(e[o]))for(var i=0,s=0,c=e[o].length;i<c;++i)null==e[o][i]||Object(a.isFunction)(e[o][i])||(n.push(r(o)+"["+s+"]="+r(e[o][i])),++s);else n.push(r(o)+"="+r(e[o]));return t||n.sort(),n.join("&")}function c(e){if(!e)return{};var t={};return e=e.split("&"),Object(a.each)(e,(function(e,n){var a=n.split("=");if(a[0]){var o=i(a[1]+"");if("[]"===a[0].substr(a.length-2)){var r=i(a[0].substr(0,a.length-2));t[r]||(t[r]=[]),t[r].push(o)}else t[i(a[0])]=o}})),t}},g3t9:function(e,t,n){"use strict";n.r(t),n.d(t,"Separator",(function(){return o}));var a=n("z9sQ");function o(e){return void 0===e&&(e={}),{class:[e.class,a.default.class("Separator",{hideOnDesktop:e.hideOnDesktop,noOffset:e.noOffset,gray:e.gray},"--")],tag:"div"}}t.default=o},he4e:function(e,t,n){"use strict";n.r(t),n.d(t,"clear",(function(){return u})),n.d(t,"onClear",(function(){return c})),n.d(t,"onClearConfirm",(function(){return _})),n.d(t,"onClearDecline",(function(){return p})),n.d(t,"isCleared",(function(){return d}));var a=n("OcsD"),o=n("+cqQ"),r=n("UxAg"),i=n("r/ag"),s=n("29dZ"),c=Object(o.default)(),l={};function d(e){var t=/([a-z]*)(-?\d+)?(?:_(-?\d+))?/.exec(e)[2];return!!l[t]||!!l[e]}function u(e,t,n,o,r,i){if(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),i){s.default.setLoading(e,!0,"white");var c="restr_"+Object(a.srand)(),l=e.closest(".PostPhotoRestriction");Object(a.domData)(l,"clear-id",c),function(e,t,n,a,o){photoview._toggleTouches(!1),clog("[PostPhotoRestriction] Show confirm to unblur "+a),Confirm(t,"PostPhotoRestriction.onClearConfirm('"+e+"', '"+a+"', '"+o+"')","PostPhotoRestriction.onClearDecline('"+e+"')",{id:e,ok_text:n})}(c,n,o,r,i)}else clog("[PostPhotoRestriction] No hash was provided")}function _(e,t,n){i.default.close(Object(a.ge)(e)),photoview._toggleTouches(!0),ajax.post(t+"?act=unblur&hash="+n,{},{onDone:function(n){var o=Object(r.$)('[data-clear-id="'+e+'"]');if(o){var i=Object(r.$)(".SplashScreen__more .Btn",o);s.default.setLoading(i,!1),o.classList.add("PostPhotoRestriction--clear")}else clog("[PostPhotoRestriction] Can't find restriction el with clear id "+e);var d=/([a-z]*)(-?\d+)?(?:_(-?\d+))?/.exec(t),u=d[2],_=d[3],p=[];n?(p.push.apply(p,Object(r.$$)('.thumb_map_img--blur[data-id^="'+u+'"]')),p.push.apply(p,Object(r.$$)('.thumb_map_img--blur[href^="/photo'+u+'"]'))):(p.push(Object(r.$)('.thumb_map_img--blur[data-id="'+u+"_"+_+'"]')),p.push(Object(r.$)('.thumb_map_img--blur[href^="/photo'+u+"_"+_+'"]'))),p.forEach((function(e){if(e){e.classList.remove("thumb_map_img--blur");var t=Object(r.$)(".PostPhotoRestriction--blur,.PostPhotoRestriction--blurWithText",e);Object(a.re)(t)}})),n&&(l[""+u]=!0),l[t]=!0,c(t);var f=[];n?f.push.apply(f,Object(r.$$)('.PhotosPhotoItem__photo[data-id^="'+u+'"]')):f.push(Object(r.$)('.PhotosPhotoItem__photo[data-id="'+t.replace("photo","")+'"]')),f.forEach((function(e){if(e){e.classList.remove("PhotosPhotoItem__photo--blur");var t=Object(r.$)(".PhotosPhotoItem__restriction",e);Object(a.re)(t)}}));var b=[];n?b.push.apply(b,Object(r.$$)('.AlbumItem__thumb--blur[data-thumb-id^="'+u+'"]')):b.push(Object(r.$)('.AlbumItem__thumb--blur[data-thumb-id="'+t.replace("photo","")+'"]')),b.forEach((function(e){if(e){e.classList.remove("AlbumItem__thumb--blur");var t=Object(r.$)(".AlbumItem__restriction",e);Object(a.re)(t)}})),setTimeout((function(){Object(a.remove)(o)}),500)}})}function p(e){var t=Object(r.$)('[data-clear-id="'+e+'"]'),n=Object(r.$)(".SplashScreen__more .Btn",t);photoview._toggleTouches(!0),i.default.close(Object(a.ge)(e)),s.default.setLoading(n,!1)}nav.onBeforeGo((function(){Object(r.$$)(".Confirm[id^=restr]").forEach((function(e){p(e.id)}))}))},"k+Df":function(e,t,n){"use strict";n.r(t);var a=n("z9sQ"),o=n("TYsd"),r=n("9y81"),i=n("29dZ"),s=n("tlMv");t.default=function(e){void 0===e&&(e={});var t=null;e.icon_raw?t=e.icon_raw:e.icon&&(t=Object(r.IconWd)({class:"SplashScreen__icon",icon:e.icon,svg:e.is_svg_icon}));var n=o.default.wrap(e.more_text);"primary"!==e.more_type&&"regular"!==e.more_type&&"outlineMono"!==e.more_type||(n=Object(i.default)({inner:[e.more_text],theme:e.more_type,url:e.more_url,onClick:e.more_onclick,attrs:{ontouchend:e.more_ontouchend},use_native_onclick:e.more_native_onclick}),e.more_url=null);var c=[e.class,a.default.class("SplashScreen",e.mix||{})];e.small&&c.push("SplashScreen--small");return[e.separator?Object(s.default)({hideOnDesktop:!e.separator_desktop}):{},{class:c,inner:e.inner||[e.before,t,e.title?{class:"SplashScreen__title",inner:o.default.wrap(e.title)}:null,e.text?{class:[e.text_class,"SplashScreen__text"],inner:o.default.wrap(e.text)}:null,e.more_text?{class:"SplashScreen__more",inner:n,href:e.more_url}:null,e.action_text?{class:"SplashScreen__action",inner:{class:"SplashScreen__actionButton",inner:o.default.wrap(e.action_text),href:e.action_url}}:null]}]}},kr3z:function(e,t,n){"use strict";n.r(t);var a=n("wx14"),o=n("UxAg"),r=n("+cqQ"),i=n("jk6M"),s=n("jE6c"),c=n("OcsD"),l=n("j80l"),d=n("eGQV"),u=n("tgcV"),_=n("cGUQ"),p=n("izth"),f=n("Cbap"),b=function(e){void 0===e&&(e={});var t=["AudioPlaylistRoot",e.class].filter((function(e){return e})).join(" ");return{attrs:{"data-playlist-id":e.playlist_id},inner:e.inner,class:t}};var v=n("g3t9"),m=n("fdw3"),h=n("0hva"),g=n("z1UI"),O=n("GtpT"),w=n("vOib"),j=n("v+Uj");var y=function(e){void 0===e&&(e={});var t=window.lang,n=e.items||[],a=e.count||null,o=e.href,r=n.map((function(e){return{inner:[Object(O.default)({album:e})],class:"AlbumsBlock__album",tag:"div"}})),i={text:Object(m.getLang)("mobile_subheader_show_all"),class:"al_albums",url:o},s=Object(j.default)({inner:[{inner:[r],class:"AlbumsBlock__albums",tag:"div"}]});return{inner:[{name:"albums",tag:"a"},Object(w.default)({title:t.mobile_photos_block_albums_title,count:a,corner:i,content:s,no_border:!0,noShadow:!0})],class:"AlbumsBlock",tag:"div"}},k=n("1VZq");var x=function(e){var t=window.lang,n=e.items||[],a=e.count||null,o=e.buttons||{},r=e.href,i=e.hide_header||!1,s=e.label||t.mobile_photos_block_photos_title,c="PhotosBlock",l="PhotosBlock__photos";!!e.autoload&&(c+=" PhotosBlock--autoload",l+=" photos_page");var d={inner:[n.map((function(e){return Object(k.default)({photo:e})}))],class:l,tag:"div"},u=null;return r&&(u={text:Object(m.getLang)("mobile_subheader_show_all"),class:"al_empty",url:r}),{inner:[{name:"photos",tag:"a"},Object(w.default)({inner:[{inner:[o.prev,d,o.more],tag:"div"}],title:i?null:s,corner:u,count:a,noShadow:!0,no_border:!0})],class:c,tag:"div"}},B=n("tlMv");var C=function(e){var t=window.lang,n=e.pretag,a=e.buttons||{},o=e.is_owner,r=[],i=e.section,s=e.albums,c=e.albums_count,l=e.albums_href,d=e.photos,u=e.photos_count,_=e.new_tags_photos,p=e.new_tags_count,f=e.new_tags_href;if("all"===i){var b=s.map((function(e){return Object(O.default)({album:e})}));b&&r.push({inner:[a.prev?a.prev:null,{inner:[b],class:"AlbumsPage__items album_items photos_page bl_cont",tag:"div"},a.more?a.more:null],tag:"div"})}else s&&s.length&&r.push(y({items:s,count:c,href:l})),_&&_.length&&r.push(x({label:t.mobile_photos_block_tags_title,items:_,count:p,href:f})),d&&d.length&&r.push(x({autoload:!0,items:d,count:u,buttons:a}));if(!r.length){var v=o?t.mobile_albums_can_store_photos:t.mobile_albums_no_albums;return Object(g.default)({separator:!0,text:v,more_type:"primary",more_text:e.add_url?t.mobile_photos_placeholder_album_action:null,more_url:e.add_url})}return{inner:["all"!==i?Object(B.default)({hideOnDesktop:!0}):null,{inner:[r],class:"upanel bl_cont",tag:"div"},n],class:"AlbumsPage PageBlock PageBlock_bottomPadding",tag:"div"}},A=n("GVTI"),S=n("W9Tc"),M=n("gF8j"),P=n("r/ag"),L=n("29dZ"),E=n("vk58");var I,D=function(e){var t=function(e){var t=e.buttons,n=Object.keys(t).map((function(n){var a=t[n],o=a.theme;o="yes"!==n||o?"secondary":"regular";var r={"data-key":n,"data-force":e.force?1:0};return Object(L.default)({inner:[a.text],theme:o,url:a.href,attrs:r,on_click:"ConfirmPopup.onButtonClick(this, event);",use_native_onclick:!0})}));return Object(E.default)({inner:[n]})}(e),n={title:e.title};return Object(P.default)({inner:[Wd.wrap(e.text),{inner:[t],class:"Popup__buttons",tag:"div"}],class:"ConfirmPopup",header:n,scrollable:!0,on_overlay_click_native:"ConfirmPopup.onOverlayClick(this, event);"})},R=n("zq7H");if(!window.ajax){var T={onBeforeRedirect:Object(r.default)("url"),onBeforePageParse:Object(r.default)(),onRedirect:Object(c.se)(),onNavDone:Object(r.default)(),_tStart:!1,_tAlStart:!1,RESPONSE_ARGUMENTS:0,RESPONSE_REDIRECT:1,RESPONSE_CAPTCHA:2,RESPONSE_PAGE:3,RESPONSE_FAILED_AUTH:4,RESPONSE_CONFIRM:5,RESPONSE_IGNORE:100,_getreq:function(){return new XMLHttpRequest},_al_reqs:[],_last_req:null,save_req:function(e){T._al_reqs.push(e||T._last_req)},abort_reqs:function(){Object(c.each)(T._al_reqs,(function(e,t){t.abort()})),T._al_reqs=[]},_failed_relogin:!1,_failed_reqs:[],save_failed_req:function(e,t,n,a){T._failed_reqs.push([e,t,n,a])},repeat_reqs:function(){Object(c.each)(T._failed_reqs,(function(){var e=this.shift();T._post.apply(null,this),Object(c.remove)(e)})),T._failed_reqs=[]},_error_displayed:null,plainpost:function(e,t,n,a,o,r,i,s){var l="string"!=typeof t?Object(_.toQueryString)(t,!0):t,u={"Content-Type":"application/x-www-form-urlencoded"};o||s||(u["X-Requested-With"]="XMLHttpRequest"),s||(Object(d.isStandalone)()&&(u["X-View-Mode"]="pwa"),r&&r.headers&&Object.assign(u,r.headers));var p=new AbortController,f=p.signal,b=new Request(e,{credentials:"same-origin",method:"POST",headers:u,body:l,signal:f}),v=fetch(b).then((function(e){return e.text().then((function(t){return e.status>=200&&e.status<300?n&&n(t,e):a&&a(t,e),{response:e,text:t}}))})).catch((function(e){var t=!1;if(a&&a(e&&e.message,null)&&(t=!0),"AbortError"===e.name)return null;if(window.isBasicOffline&&("true"===b.headers.get("X-Ajax-Nav")&&history.back(),!t&&(!T._error_displayed||T._error_displayed<=Date.now()-1e4))){var n=Object(c.getLang)("mobile_general_snackbar_error");navigator.onLine||(n=Object(c.getLang)("mobile_pwa_offline_network_lost")),Object(c.statlogsValueEvent)("mvk_ajax_error_snackbar",Number(navigator.onLine)),Snackbar.init({text:n}),T._error_displayed=Date.now()}throw e})),m={request:b,abort:p.abort.bind(p),promise:v};return T._last_req=m,m},post:function(e,t,n){return"/"!=e.substr(0,1)&&(e="/"+e),e=e.split("#")[0],T._post(e,t,n||{})},onPrepared:Object(c.se)(),prepare_click:function(e){var t=window.al;if(i.default.ios&&!(i.default.ios>=7)&&window.al&&t.ver){var n=[],a=!1;e&&"a"==(e.tagName||"").toLowerCase()?n.push(e):Object(c.isArray)(e)?n=e:(n=Object(c.geByTag)("a",e),a=!0);for(var o=0,r=n.length;o<r;o++){var s=n[o],l=s&&s.target||"";if(s&&s.getAttribute&&(!a||!s.getAttribute("data-href")&&Object(c.checkElementNav)(s,{skip_onclick:!0})&&"_blank"!=l)){var d=s.getAttribute("href");if(null==d||!Object(c.isHttpHref)(d))continue;Object(c.attr)(s,"data-href",Object(c.getHref)(s)),Object(c.attr)(s,"href",!1)}}}},click:function(e,t,n){var a=window.nav;t=t||{};var o,r=!1,i={_ajax:1},s=Object(c.extend)(t,{link:e});if(n=n||{},(n=Object(c.extend)({closeContextMenu:!0},n)).closeContextMenu&&ContextMenu.close(),t.onStart){var l=T.tAlGetParam();T.tAlStart=(new Date).getTime(),l&&(i._talstat=l)}if(n.use_cache){var d=Object(c.ge)(!0===n.use_cache?"preload_data":n.use_cache),u=d.innerHTML.replace(/(^<!--|-->$)/g,""),_=u.split("--\x3e\x3c!--");if(u)d.innerHTML="",t.onStart&&t.onStart.apply(s),n.nav&&a.go(r,null,{push_only:!0}),t.onDone&&t.onDone.apply(s,_),(e=Object(c.geByClass1)("show_more",Object(c.geByClass1)("pcont","mcont")))&&T.click(e,{onDone:function(){var e="";Object(c.each)(arguments,(function(t,n){e+="\x3c!--"+(n||"")+"--\x3e"})),d.innerHTML=e,Object(c.ge)("show_more_loading")&&T.click(!1,t,n)}},{closeContextMenu:!1});else t.onStart&&t.onStart.apply(s),n.nav&&a.go(r,null,{push_only:!0});return!1}if(!e)return!0;if(e.form){if(e.disabled)return!0;var p=e.form,f={};r=(p.action||"").replace(/^https?:\/\/[^\/]+/i,""),Object(c.each)(p,(function(t,n){return!(n.name&&!n.disabled)||("radio"===n.type&&!n.checked||("checkbox"===n.type&&!n.checked||("button"===n.type||("submit"===n.type&&n!==e||("image"===n.type&&n!==e||void(f[n.name]=n.value))))))})),"image"==e.type&&(f[e.name]=e.value,f[e.name+".x"]=1,f[e.name+".y"]=1),p.method&&"get"!=p.method?Object(c.extend)(i,f):r=r.split("?",1).shift()+Object(c.obj2qs)(f)}else e.getAttribute&&(r=e.getAttribute("data-href")||e.getAttribute("href"));if(r||(r=e.pathname?e.pathname+e.search+e.hash:e),!r)return!0;Object(c.extend)(i,n.url_params||{});var b=window.pStats,v=b.getSeenData();if(v){var m=window.cur;i._pstat=v.data,m&&m.module&&(i._pstatref=m.module)}return(o=T.post(r,i,{onDone:function(){v&&b.onSend(v.seen),n.lock&&Object(c.unlockButton)(e),t.onDone&&t.onDone.apply(s,arguments),(n.nav||n.scroll)&&Object(c.scrollToHash)()},onFail:function(){n.lock&&Object(c.unlockButton)(e),t.onFail&&t.onFail.apply(s,arguments),(n.nav||n.scroll)&&Object(c.scrollToHash)()}}))&&(t.onStart&&t.onStart.apply(s),n.nav&&a.go(r,null,{push_only:!0}),n.lock&&Object(c.lockButton)(e)),!o},nav:function(e,t){var n=window.nav,r=window.page,d=window.menu,_=window.cur,p=window.Tabbar;(t=t||{}).nav=t.nav||{};var f,g=Object(c.getHref)(e),w=r.getHash(t.nav);if(!(g=n.checkUrl(g)))return!1;"/"!=g.substr(0,1)&&(g="/"+g),d.close(null,!0);var j=T.tGetParam();if(T.tStart=(new Date).getTime(),t.need_restore&&d&&d.closeSearch(),window.isNewMail&&(t.need_restore&&t.nav.push&&!t.need_check_updates&&T.abort_reqs(),n.onBeforeGo2(t.nav.path,Object.assign({},Object(c.qs2obj)(t.nav.params),t.params),t.nav.push,t)))return T.abort_reqs(),!0;if(t.need_restore&&t.nav.push&&(f=r.restore(w))&&(T.abort_reqs(),T._failed_relogin=!1,f.lm&&Object(c.extend)(f.lm,{tn:!1,bn:!1}),r.set(w,f,{restored:!0},t),t.zProcess&&(t.zProcess(f.st),delete t.zProcess),n.set(t),T.tModule=window.cur.module,T.tRestoreRender=(new Date).getTime(),!t.need_check_updates))return!0;var y=!1,k=!1;if(t.need_check_updates&&n.isTabHaveCache(t.tab,w));else if(t.fast)y=!0,r.set(w,!1,{before:!0,beforeAppend:t.beforeAppend,afterAppend:t.afterAppend}),k=t.onAfterFast||!1;else if(t.target&&t.target.className){(x=/(?:^|\s)(al_([a-z_]+)(-?[0-9]+)?)(?:\s|$)/i.exec(t.target.className))&&x[1];var x,B=x&&x[2]||!1;switch(B){case"menu":y=!0,r.set(w,!1,{before:!0,beforeAppend:function(e){var n=Object(o.$)(".vk__page");if(n.className=n.className.replace("vk__page_notifications",""),window.isNewMail){var a=Object(c.geByClass1)("mcont",e)||Object(c.geByClass1)("layout__basis");Object(c.val)(a,'<div class="pcont bl_cont"><div id="al_loading"></div></div>')}else Object(c.val)(Object(c.geByClass1)("mcont",e),'<div class="pcont bl_cont"><div id="al_loading"></div></div>');r.setMhead(e,Object(c.attr)(t.target,"data-header"),"/")},afterAppend:function(){window.isNewMail&&"/mail"===w?Object(c.alLoadingFix)(Object(c.geByClass1)("layout").offsetHeight):Object(c.alLoadingFix)(),Object(c.scrollTop)(0)}});break;case"tab":y=!0,r.set(w,!1,{before:!0,beforeAppend:function(e){Object(c.val)(Object(c.geByClass1)("upanel",e),'<div id="al_loading"></div>'),Object(c.val)(Object(c.geByClass1)("basisDefault",e),'<div id="al_loading"></div>');var t=Object(c.geByClass1)("tabs_block",e)||Object(c.geByClass1)("tabs",e),n=Object(c.geByClass1)("active",t);n&&(Object(c.hasClass)("tab_item_top",n)?(Object(c.removeClass)("tab_item_cur",Object(c.geByClass1)("tab_item_cur",t)),Object(c.addClass)("tab_item_cur",Object(c.geByClass1)("tab_item",t))):(Object(c.removeClass)("tab_item_cur",Object(c.geByClass1)("tab_item_cur",t)),Object(c.addClass)("tab_item_cur",n)))},afterAppend:function(){Object(c.alLoadingFix)()}},t);break;case"post":y=!0,r.set(w,!1,{before:!0,beforeAppend:function(e){var n=window.lang,a=Object(c.clone)(Object(c.gpeByClass)("post_item",t.target)),o=a.id,i=Object(c.outer)(Object(c.gpeByTag)("a",Object(c.geByClass1)("pi_img",a))).replace("pi_img","op_img"),s=Object(c.gpeByTag)("div",Object(c.geByClass1)("pi_author",a)),l=Object(c.remove)(Object(c.geByClass1)("pi_date",a)),d=Object(c.outer)(Object(c.remove)(Object(c.geByClass1)("explain",s))),u=Object(c.remove)(Object(c.geByClass1)("pi_fronly",a)),_=Object(c.outer)(s),p=Object(c.geByClass1)("pi_body",a),f=Object(c.geByClass1)("pi_text_more",p),b=(l=Object(c.geByClass1)("pi_date",a),Object(c.geByClass1)("pi_info",p)),v=Object(c.geByClass1)("pi_links",p),m=Object(c.geByClass1)("replies_link",v),h=Object(c.val)(Object(c.remove)(Object(c.geByClass1)("pi_actions_wrap",a))),g=Object(c.val)(Object(c.remove)(Object(c.geByClass1)("item_replies",b)))?Object(c.val)(m):n.mobile_wall_post_replies_title,O=m?'<a name="comments"></a><h3 class="slim_header">'+(g||"")+'</h3><div id="al_loading"></div>':"";if(f){var w=f.nextSibling?f:f.parentNode;w.nextSibling.style.display="inline",w.style.display="none"}Object(c.val)(v,Object(c.outer)(Object(c.geByClass1)("like_wrap",p))),l&&Object(c.attr)(l,"data-date")&&Object(c.val)(l,Object(c.attr)(l,"data-date")),r.setMhead(e,Object(c.attr)(t.target,"data-header"),!0),Object(c.val)(Object(c.geByClass1)("mcont",e),function(e,t,n,a,o,r,i,s){return'<div class="pcont bl_cont"><div class="owner_panel">'+(t||"")+'<div class="op_cont">'+(n||"")+'<div class="op_info"><span class="item_date">'+(a||"")+'</span></div></div></div><div id="'+(e||"")+'" class="post_item single_post_item"><div class="pi_cont"><div class="pi_head">'+(o||"")+'</div><div class="pi_body">'+(r||"")+"</div></div>"+(s||"")+"</div>"+(i||"")+"</div>"}(o,i,_,Object(c.val)(l)+(u?'<b class="pi_fronly"></b>':""),d,Object(c.val)(p),O,h))},afterAppend:function(e){var n=Object(c.geByTag1)("h3",e);n&&Object(c.alLoadingFix)(t.nav.hash?Object(c.getCh)()-n.offsetHeight:0),t.nav.hash?Object(c.scrollToHash)(t.nav.hash):Object(c.scrollTop)(0)}},t);break;case"wall":y=!0,r.set(w,!1,{before:!0,beforeAppend:function(e){var n=window.lang,a=Object(c.clone)(Object(c.hasClass)("wall_item",t.target)?t.target:Object(c.gpeByClass)("wall_item",t.target)),o=a.id,i=Object(c.geByClass1)("wi_body",a),s=Object(c.geByClass1)("wi_buttons",a),l=Object(c.geByClass1)("item_like",s),d=Object(c.geByClass1)("v_like",l),u=Object(c.geByClass1)("item_share",s),_=Object(c.geByClass1)("v_share",u),p=Object(c.remove)(Object(c.geByClass1)("item_replies",s)),f=!!p&&Object(c.geByClass1)("v_replies",p),b=+Object(c.stripTags)(Object(c.val)(f)).replace(/\D/g,""),m=Object(c.geByClass1)("pi_text_more",i),h=Object(c.geByClass1)("wi_date",a),g=b?Object(c.langNumeric)(b,n.mobile_wall_post_comments):n.mobile_wall_post_replies_title,O=p&&b<50?'<a name="comments"></a><h3 class="slim_header">'+(g||"")+'</h3><div id="al_loading"></div>':"";if(clog("item_replies",p),Object(c.remove)(Object(c.geByClass1)("wi_actions_btn",a)),Object(c.remove)(Object(c.geByClass1)("post__subscribeBtn",a)),Object(c.remove)(Object(c.geByClass1)("post__extraHeader",a)),d?Object(c.val)(d):Object(c.append)(Object(c.ce)("span",{className:"v_like"}),l),_?Object(c.val)(_):Object(c.append)(Object(c.ce)("span",{className:"v_share"}),u),m){var w=m.nextSibling?m:m.parentNode;w.nextSibling.style.display="inline",w.style.display="none"}h&&Object(c.attr)(h,"data-date")&&Object(c.val)(h,Object(c.attr)(h,"data-date")),r.setMhead(e,Object(c.attr)(t.target,"data-header"),!0);var j=Wd.html(Object(v.Separator)({hideOnDesktop:!0}));Object(c.val)(Object(c.geByClass1)("mcont",e),function(e,t,n,a){return'<div class="pcont"><div class="PageBlock">'+e+'<div class="wall_item single_wall_item" id="'+(t||"")+'">'+(n||"")+"</div>"+(a||"")+"</div></div>"}(j,o,Object(c.val)(a),O)),Object(c.addClass)("vk__page_singlePost",document.body)},afterAppend:function(e){var n=Object(c.geByTag1)("h3",e);n&&Object(c.alLoadingFix)(t.nav.hash?Object(c.getCh)()-n.offsetHeight:0),t.nav.hash?Object(c.scrollToHash)(t.nav.hash):Object(c.scrollTop)(0)}},t);break;case"pinfo":y=!0,r.set(w,!1,{before:!0,beforeAppend:function(e){var t=window.lang,n=Object(c.geByClass1)("owner_panel",e),a=Object(c.geByClass1)("pp_img",n),o=Object(c.geByClass1)("op_header",n),i=Object(c.geByClass1)("lvi",o),s=Object(c.geByClass1)("pp_last_activity",n),l=Object(c.ce)("div");Object(c.addClass)("mhi_back",Object(c.geByClass1)("mh_header",e)),Object(c.val)(n,'<img src="'+Object(c.escapeAttr)(Object(c.attr)(a,"src")||"")+'" class="op_img"><div class="op_cont"><h2 class="op_header">'+Object(c.stripTags)(Object(c.val)(o))+'</h2><div class="pp_online">'+(i?t.mobile_online:Object(c.val)(s))+"</div></div>"),Object(c.val)(Object(c.geByClass1)("ipanel",e),"<div>"+Object(c.val)(l)+'</div><div id="al_loading"></div>'),r.setMhead(e,!1,!0)},afterAppend:function(){Object(c.alLoadingFix)(),Object(c.scrollTop)(0,10)}},t);break;case"player":y=!0;var M=Object(c.qs2obj)(t.nav.params).playlist_id;r.set(w,!1,{before:!0,beforeAppend:function(e){var t=window,n=t.lang,a=t.audio,o=(a.playlist(),a.playlist_q());r.setMhead(e,n.mobile_menu_player_head_title,!0),Object(c.val)(Object(c.geByClass1)("mcont",e),'\n                <div class="pcont audioPage">\n                  <div class="PageBlock">\n                    <div class="audioPage__header">\n                      '+AudioPlaylist.tplPlayerSearch(M)+'\n                    </div>\n                    <div id="au_search_items" class="upanel bl_cont">\n                      <div class="audios_block audios_list _si_container" data-query="'+Object(c.escapeAttr)(o)+'"></div>\n                    </div>\n                  </div>\n                </div>'),Object(c.val)("m",e.innerHTML)}},t),k=function(){var e=window,n=e.qsearch,a=e.audio,o=a.playlist(),s="/audio"+Object(c.obj2qs)({act:"player",list:M}),l=[],d={},u=a.getCurrentId();Object(c.each)(o,(function(e,t){t.chartInfo=null,l.push(t.fullId),d[t.fullId]=[t.performer+" "+t.title,t]}));var _=l.indexOf(u),p=_>-1?Math.min(_+10,l.length):50,f=[];n.init({action:s,al_action:s,container:"au_search_items",field:Object(c.ge)("au_search_field"),btn:Object(c.ge)("au_search_btn"),top_items:l,_cache:d,forceRerender:!0,tpl:function(e,t,n,o){var r="";if(t){if(o)return o;r=""==o?'<div class="audios_block audios_list _si_container" data-query="'+Object(c.escapeAttr)(t)+'">'+e+"</div>":'<div class="audios_block audios_list _si_container" data-query="'+Object(c.escapeAttr)(t)+'"><div class="al_loading qs_loading">&nbsp;</div></div>'}else r='<div class="audios_block audios_list _si_container" data-query="'+Object(c.escapeAttr)(a.playlist_q())+'">'+e+"</div>";return Wd.html(b({playlist_id:M,inner:Wd.wrap(r)}))},item_tpl:function(e){var t=window.audioplayer;return f.push(e),t&&t.getDOMFromAudio(e,!0,this.q,!0)||""},null_tpl:function(e){var t=window.lang;return'<div class="service_msg_box">\n                  <div class="service_msg service_msg_null">\n                  '+(e?t.mobile_audio_search_not_found.replace("%s",Object(c.htsc)(e)):t.mobile_audio_no_audio)+"\n                  </div>\n                </div>"},soft_filter:!0,need_invalid_keys:i.default.desktop,top_len:p,global_search:!0,onRendered:function(){var e=window,t=e.audioplayer,n=e.audio;t&&t.initAudio(),n.addToPlaylist(f),Object(c.alLoadingFix)()},al_need:!0,init_offset:0});var v=window.audioplayer.getCurrentElem();if(v){var m=Object(c.getY)(v)+v.offsetHeight/2-Object(c.getCh)()/2;Object(c.scrollTop)(m,100),r.save(w,{html:null,st:Object(c.scrollTop)(),page:Object(c.ge)("m"),state:r.stash(),cur:window.cur,options:t||{}},!1)}};break;case"photo":y=!0,r.set(w,!1,{before:!0,beforeAppend:function(e){p.drawLoader(e);var n=Object(c.geByTag1)("img",t.target),a=(Object(c.attr)(n,"data-src_big")||"").split("|"),o=(a[0],a[1],a[2],n&&n.src||"/images/mobile/blank.gif"),i=n&&n.width||+a[1]||0,s=n&&n.height||+a[2]||0,l=(domData(n,"info-title"),domData(n,"info-subtitle"),function(e,t){return Wd.html(Object(A.default)({is_loading:!0,photo:e}))}({src:o,width:i,height:s}));Object(c.val)(Object(c.geByClass1)("mcont",e),l),Object(c.alLoadingFix)(),r.setMhead(e,lang.mobile_photos_photo_title)},afterAppend:function(){Object(c.alLoadingFix)(),Object(c.scrollTop)(0)}},t);break;case"album":y=!0,r.set(w,!1,{before:!0,beforeAppend:function(e){p.drawLoader(e);var n,i=t.target.href,s=/((?:album|tag)(-?\d+)(?:(?:_(\d+))?))/.exec(i);s&&(n=s[1]);var d=n&&Object(m.getState)(n)||{},u=Object(o.$)(".AlbumItemInfo__title",t.target),_=!1;t.target.classList.contains("AlbumItem--empty")&&(_=!0);var f=Object(l.makeUrl)("/"+n,{act:"select_album"}),b=Object(a.default)({},d,{title:d.title||Object(c.val)(u)||lang.mobile_page_title_album,description:Wd.wrap(d.description),is_empty:_,add_url:f}),v=function(e){return void 0===e&&(e={}),Wd.html(Object(h.default)(Object(a.default)({},e,{title:Wd.wrap(e.title),is_loading:!e.is_empty})))}(b);Object(c.val)(Object(c.geByClass1)("mcont",e),v),Object(c.alLoadingFix)(),r.setMhead(e,b.title,!0,!1,{movable:!0})},afterAppend:function(){Object(h.initAlbumPage)(),Object(c.alLoadingFix)(),Object(c.scrollTop)(0)}});break;case"albums":y=!0,r.set(w,!1,{before:!0,beforeAppend:function(e){p.drawLoader(e);var n=t.target.closest(".AlbumsBlock"),r=[];n&&(r=Array.from(Object(o.$$)(".AlbumItem",n)).map((function(e){return Object(O.getDataFromDOM)(e).album})));var i=function(e){return void 0===e&&(e={}),Wd.html(C(Object(a.default)({},e,{section:"all"})))}({albums:r});Object(c.val)(Object(c.geByClass1)("mcont",e),i),Object(c.alLoadingFix)()},afterAppend:function(){Object(h.initAlbumPage)(),Object(c.alLoadingFix)(),Object(c.scrollTop)(0)}});break;case"u":case"g":case"p":case"e":y=!0,r.set(w,!1,{before:!0,beforeAppend:function(e){p.drawLoader(e)},afterAppend:function(){Object(c.alLoadingFix)(),Object(c.scrollTop)(0)}},t);break;case"playlists":y=!0,r.set(w,!1,{before:!0,beforeAppend:function(e){p.drawLoader(e)},afterAppend:function(){Object(c.alLoadingFix)(),Object(c.scrollTop)(0)}});break;case"empty":case"artist":case"playlist":y=!0,r.set(w,!1,{before:!0,beforeAppend:function(e){p.drawLoader(e)},afterAppend:function(){Object(c.alLoadingFix)(),Object(c.scrollTop)(0)}},t);break;case"news_subsection":y=!0,r.set(w,!1,{before:!0,beforeAppend:function(e){var t=Object(c.geByClass1)("news_subsections",e);t&&!Object(c.hasClass)("summary_loading",t.firstChild)&&Object(c.before)(Object(c.ce)("div",{className:"summary_loading",innerHTML:'<i class="i_loading"></i>'}),t.firstChild)}});break;case"tabbar":y=!0,t.is_fast=!0;var P=!1,L={options:{is_fast:!0,tab:t.tab,prev_tab:t.prev_tab}};t.need_check_updates&&f&&(L=Object(c.extend)(L,f),P=!0),r.set(w,L,{before:!P,beforeAppend:function(e){r.setMhead(e,Object(c.attr)(t.target,"data-header"),!1),p.drawSkeletonLoader(e,t.tab),document.body.classList.contains("vk_tabbar_bottom")&&r.hideHeader(e)},afterAppend:function(){Object(c.alLoadingFix)()}});break;default:_=window.cur;var E=!!Object(c.geByClass1)("mhi_logo","mhead");if(y=!0,_.al_fast&&_.al_fast[B])r.set(w,!1,_.al_fast[B](t),t);else if(!E){var I={options:{is_fast:!0,tab:t.tab,removeAfterNextResponse:t.removeAfterNextResponse}};r.set(w,I,{before:!0,afterAppend:function(){Object(c.alLoadingFix)()}})}}}if(t.need_check_updates||T.abort_reqs(),t.local){var D=!0;r.set(w,{},{after:!0,no_scroll:!0,force:!0},!1),k&&k()}else{var R=Object(S.partConfigEnabled)("mvk_fix_nav_params")?{}:Object(c.qs2obj)(t.nav.params);Object(c.extend)(R,t.params||{}),window.al&&!window.al.inited?R[d.NEED_MENU_PARAM]=d.FORCE_NEED_MENU:window.al&&window.al.menu||(R[d.NEED_MENU_PARAM]=d.NEED_MENU),j&&(R._tstat=j);var G=window.pStats,N=G.getSeenData();N&&(R._pstat=N.data,_&&_.module&&(R._pstatref=_.module)),t.target&&Object(s.isElement)(t.target)&&(R._ref=domData(t.target,"ref")),R._ref||(R._ref=(n.path||"").substr(1));var q=g.split("#");!R._hash&&q.length>1&&(R._hash="#"+q[1]),Object(u.preloadStaticForNavigation)(g);var F=Object.assign({},t.headers,{"X-Ajax-Nav":"true"});D=T.post(g,R,{onPageDone:function(e,n,a,i,s){T.fastNav=!1;var c=window.cur;if(N&&G.onSend(N.seen),T.tProcess=(new Date).getTime(),r.set(w,{title:e,html:n,js:a,lm:i,bc:s,st:t.st||0},{after:y,no_scroll:y,al_transition:!0},!y&&t),t.back){var l=Object(o.$)(".layout");r.setMhead(l,!1,t.back)}T.tModule=c.module,T.tRender=(new Date).getTime(),T.onNavDone()},redirectToLoginPage:t.redirectToLoginPage,headers:F});T.save_req()}return y&&(t.zProcess&&(t.zProcess(),delete t.zProcess),n.set(t),T.tModule=_.module,T.tFastRender=(new Date).getTime(),T.fastNav=!0),D},confirm:function(e){function t(t,n,a,o){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n,a){return!!confirm(t)&&T.click(e,a,{url_params:{hash:n}})})),_post:function(e,t,n){var a=function(e,t){n.onFail&&n.onFail.call(window,0,e,t)},o=window.debuglogSent?window.debuglogSent(e):-1;return T.plainpost(e,t,(function(r,i){if(204===i.status&&i.headers.get("X-AppShell-Fallback")){var s=location.href;return history.replaceState(null,null,Object(l.makeUrl)(location.href,{__appshell_fallback:i.headers.get("X-AppShell-Fallback")})),void location.replace(s)}var d=!1;try{d=Object(c.parseJSON)(r)}catch(t){if(i.getResponseHeader("Content-Type").includes("text/html"))return nav.hard_go(e,null,n);d=!1}!1===d?a():(T.parseResponse(d,e,t,n),T._debugLog(o,d.debugLog))}),a,null,{headers:n.headers})},_debugLog:function(e,t){window.debuglogGot&&window.debuglogGot(e,t)},parseResponse:function(e,t,n,a){var r,i=window.al,s=window.nav,l=window.menu,d=window.page,_=e.version,b=e.counters,v=e.notifications,m=e.type,h=e.statsMeta,g=t.indexOf("community")>=0,O=!1;if(m!==T.RESPONSE_IGNORE)switch(g?(O=!(!window.al||_===i.ver))&&Object(c.statlogsValueEvent)("mvk_version_reload",1,_,i.ver,"old_force_reload_community"):window.al&&_!==i.ver?Object(S.partConfigEnabled)("mvk_lazy_static_reload")?m===T.RESPONSE_ARGUMENTS?I||(I=new M.default({id:"mvk_static_manager",element:document,focusElement:window,triggerEvents:"mouseover mousedown keypress touchstart",idleTimeout:6e5,onIdleCb:function(){Object(c.statlogsValueEvent)("mvk_version_reload",1,_,i.ver,"new_idle_reload"),I.stop(),location.reload()}})).start():(Object(c.statlogsValueEvent)("mvk_version_reload",1,_,i.ver,"new_force_reload"),O=!0):(Object(c.statlogsValueEvent)("mvk_version_reload",1,_,i.ver,"old_force_reload"),O=!0):!window.menu||e.lm_data&&e.lm_data.lm||l.isMenuHasItems()&&((O=!l.refreshCounters(b))&&Object(c.statlogsValueEvent)("mvk_version_reload",1,_,i.ver,"old_force_reload_change_menu"),l.refreshNotifications(v)),void 0===b||!1===b||g||Object(c.setNotify)(b[R.COUNTERS_POS_MESSAGES]),e.lm_data&&e.lm_data.lm&&(b&&(e.lm_data.counters=b),v&&(e.lm_data.notifications=v)),h&&window.vk&&(window.vk.statsMeta=h),m){case T.RESPONSE_ARGUMENTS:if(O)return s.hard_go(s.cur,null,{replace:!0});var w=e.data;if(r=w&&Object(c.isObject)(w[0])&&w[0]._snackbar){if(Snackbar.init(r),2===r.type)return photoview.opened()?void photoview.close():Stories.opened?void Stories.close():zlayer.opened()?void zlayer.close():void(T.fastNav&&history.back());delete w[0]._snackbar}a&&a.onDone&&a.onDone.apply(window,w);break;case T.RESPONSE_REDIRECT:var j=e.location;T.onRedirect(!0,j);var y=e.hard,k=e.frame,x=e.clear,B=e.restore,C=e.replace;if(!k&&window.isNewMail&&T.onBeforeRedirect(j))break;if(x&&s.clear(),(r=e._snackbar)&&(Snackbar.init(r),delete e.snackbar),O||y)s.hard_go(j,null,{replace:C});else if(k){Object(p.setDocumentDomain)();var A=j+(-1==j.indexOf("?")?"?":"&")+"__extra=1",P=Object(c.createIframe)({src:A})}else C&&j===s.prev_cur?history.back():s.go(j,null,{ignore_cur_process:!0,need_restore:B,replace:C});break;case T.RESPONSE_CAPTCHA:var L=e.location,E=e.img,G=e.post,N=e.key;a&&a.onFail?a.onFail(m,L,{location:L,img:E,post:G,key:N}):s.hard_go(L);break;case T.RESPONSE_PAGE:var q=e.lm_data;if(d.need_hard_go=O,q&&q.rdr&&window.al&&i.menu&&Object(c.getW)("vk_wrap")>=614){s.go(q.rdr,null,{replace:!0});break}f.default.getRouter().deactivateAllRoutes(),cur.share&&"destroy"in cur.share&&cur.share.destroy(),(a=a||{}).onPageDone||(a.onPageDone=function(e,n,a,o,r){s.go(t,null,{push_only:!0}),d.set(d.getHash(s),{title:e,html:n,js:a,lm:o,bc:r})});var F=e.title,V=e.html,H=e.js,Q=e.body_class,$=e.top_bar,z=Object(c.ge)("vk_topbar");$&&!z?(z=Object(c.ce)("div",{id:"vk_topbar",innerHTML:$}),Object(c.before)(z,Object(o.$)(".layout"))):Object(c.val)(z,$),e.env&&e.env.pe&&(window.vk.pe=e.env.pe),Object(u.addStatic)(e.static_files).then((function(){a.onPageDone(F,V,H,q,Q)}));break;case T.RESPONSE_FAILED_AUTH:if(a.redirectToLoginPage)return window.location=e.location,!1;if(!T._failed_relogin){var K=e.location;Object(p.setDocumentDomain)();P=Object(c.createIframe)({src:K})}T._failed_relogin=!0,T.save_failed_req(P,t,n,a);break;case T.RESPONSE_CONFIRM:var W=e.data,U=D(W),Y=Wd.elem(U);Popup.open(Y,!0);break;case T.RESPONSE_IGNORE:return}},onReLoginDone:function(){T.repeat_reqs(),T._failed_relogin=!1},tGetParam:function(){if(T.tStart&&T.tModule){var e=T.tFastRender-T.tStart,t=T.tRestoreRender-T.tStart,n=T.tProcess-T.tStart,a=T.tRender-T.tProcess,o=["/"==T.tModule.substr(0,1)?T.tModule.substr(1):T.tModule,e,t,n,a];for(var r in o)(!o[r]||o[r]<0)&&(o[r]=0);return T.tStart=!1,o.join(",")}},tAlGetParam:function(){if(T.tAlStart&&T.tAlModule){var e=T.tAlProcess-T.tAlStart,t=T.tAlRender-T.tAlProcess,n=["al_"+("/"==T.tAlModule.substr(0,1)?T.tAlModule.substr(1):T.tAlModule),e,t];for(var a in n)(!n[a]||n[a]<0)&&(n[a]=0);return T.tAlStart=!1,n.join(",")}},refreshLinks:function(e,t){if(e){var n=Object(c.geByClass1)("mmi_fv","lm_cont"),a=n&&Object(c.geByClass1)("lfm_item",n),o=Object(c.geByClass1)("mmi_fv","mfoot"),r=o&&Object(c.geByClass1)("lfm_item",o),i=Object(c.ge)("fv_link"),s=Object(c.ge)("menu_fv_link"),l=Object(c.geBySel1)('link[rel="canonical"]');Object(c.attr)(a,"href",e),Object(c.attr)(r,"href",e),Object(c.attr)(i,"href",e),Object(c.attr)(l,"href",Object(c.attr)(Object(c.ge)("mcont"),"data-canonical")),window.nav.prev_fv_link&&Object(c.attr)(s,"href",window.nav.prev_fv_link),window.nav.fv_link=e}if(t){var d=Object(c.geByClass1)("mmi_app","lm_cont"),u=d&&Object(c.geByClass1)("lfm_item",d),_=Object(c.geByClass1)("mmi_app","mfoot"),p=_&&Object(c.geByClass1)("lfm_item",_),f=Object(c.ge)("app_link"),b=!!t&&"return nav.app_go(this, event, '"+Object(c.escapeStr)(t)+"');";Object(c.attr)(u,"onclick",b),Object(c.attr)(p,"onclick",b),Object(c.attr)(f,"onclick",b)}}};window.ajax=T}t.default=window.ajax},myok:function(e,t,n){"use strict";n.r(t);var a=n("TYsd"),o=n("BoyB"),r={className:"Btn",setLoading:function(e,t,n){void 0===n&&(n="");if(!e)return;var a=e.classList.contains(i);if(t){if(a)return;var r=e.classList.contains(s),u=e.classList.contains(l);!n&&r&&(n="white");var _=!1;"spinner"===n&&(_=!0,n=!1);var p=Object(o.default)({mix:c,white:"white"===n||u,large:!0,spinner:_});e.classList.add(i),e.insertAdjacentHTML("afterbegin",p)}else{if(!a)return;var f=e.$(d.loader);e.classList.remove(i),f.remove()}},setDisabled:function(e,t){void 0===t&&(t=!0);e.disabled=t}};t.default=r,r._onClick=u;var i="Btn_loading",s="Btn_theme_secondary",c="Btn__loader",l="Btn__loader--white",d={loader:"."+c};function u(e,t,n){e.preventDefault(),a.default.handle(n,{$btn:t})}},p5n7:function(e,t,n){"use strict";n.r(t);var a=n("z9sQ"),o=n("fdw3"),r=function(e){void 0===e&&(e={});var t=e.style||[],n=e.class||e.mix,r=e.prefix,i=e.postfix,s=function(e){var t=[];Object(o.isArray)(e.on_key_down)?(e.on_key_down.push("event"),t=e.on_key_down):e.on_key_down&&(t=[e.on_key_down,"event"]);var n=e.on_key_press;return{class:"TextInput__native",id:e.id,tag:"input",type:e.type,name:e.name,value:e.value,spellcheck:e.spellcheck+"",placeholder:e.placeholder,autocapitalize:!1===e.autocapitalize?"off":null,autocomplete:!1===e.autocomplete?"off":null,tabindex:e.tabindex,readonly:e.readonly,disabled:e.disabled,oninput:e.on_change,onkeydown:t,onkeypress:n,onblur:e.onblur,onfocus:e.onfocus,maxlength:e.maxlength,pattern:e.pattern,required:e.required,inputmode:e.inputmode}}(e),c=e.error;c&&(t.error=!0);return{class:[a.default.class("TextInput",{style_stretch:t.stretch,prefixed:!!r,hidden:"hidden"===e.type,error:t.error}),n],tag:"label",onclick:e.on_click,inner:r||i||c?[r?{class:a.default.class("TextInput__prefix",{rightPadding:r.with_right_padding,gray:r.gray}),inner:r.text}:null,{class:"TextInput__nativeWrap",inner:s},i?{class:"TextInput__postfix",inner:i.text}:null,c?{inner:[c],class:"TextInput__errorLabel",tag:"span"}:null]:s}};var i=n("zvhO"),s=n("OcsD");Object.assign(r,{setPrefix:function(e,t){e.$(l).innerText=t},getValue:function(e){return e.$(c).value},filter:function(e,t,n){switch(e){case"number":var a=Object(s.val)(n)+String.fromCharCode(t.which);Object(i.isNumber)(parseInt(a))||Object(s.cancelEvent)(t),Object(s.val)(n,Object(s.val)(n).split("").filter((function(e){return Object(i.isNumber)(+e)})).join(""))}}});var c=".TextInput__native",l=".TextInput__prefix";t.default=r;window.TextInput=r},p8d5:function(e,t,n){"use strict";n.r(t),n.d(t,"ORIENTATION_LANDSCAPE",(function(){return r})),n.d(t,"ORIENTATION_PORTRAIT",(function(){return i})),n.d(t,"getCurrentOrientation",(function(){return s})),n.d(t,"lockOrientation",(function(){return c})),n.d(t,"unlockOrientation",(function(){return l})),n.d(t,"onOrientationChanged",(function(){return a}));var a,o=n("OcsD"),r="landscape",i="portrait";function s(){if(window.screen&&window.screen.orientation)switch(window.screen.orientation.type){case"landscape-primary":case"landscape-secondary":return r;case"portrait-primary":case"portrait-secondary":return i;default:if(window.orientation)return 90===Math.abs(window.orientation)?r:i}return window.innerWidth>window.innerHeight?r:i}function c(e){return"orientation"in window.screen&&"lock"in window.screen.orientation?Promise.resolve(window.screen.orientation.lock(e)):Promise.reject("Unsupported")}function l(){"orientation"in window.screen&&"unlock"in window.screen.orientation&&window.screen.orientation.unlock()}window._onOrientationChanged?a=window._onOrientationChanged:(a=Object(o.se)(),window._onOrientationChanged=a,"orientation"in window.screen?window.screen.orientation.onchange=a:addEvent(window,"orientationchange",(function(e){window.browser&&window.browser.iphone?setTimeout((function(){a(e)}),100):a(e)})))},"r/ag":function(e,t,n){"use strict";n.r(t),n.d(t,"POPUP_DISAPPEAR_TIME",(function(){return u})),n.d(t,"POPUP_NAV_PREFIX",(function(){return d}));var a,o,r=n("Po+v"),i=n("1By4"),s=n("UxAg"),c=n("j80l"),l=n("OcsD"),d="pop_",u=200;Object.assign(r.default,{open:function(e,t,n){void 0===n&&(n={});var a=n,o=a.hash,r=a.oncloseCallback;if(B(e),h=Boolean(n.forceScrollDisable),t){var i=e;(e=i.cloneNode(!0)).appendedToBody=!0,e.original=i,document.body.appendChild(e)}e.classList.add(p.open);var s=e.$(f.scroll);k(e),r&&O.push([e,r]);if(s){if(j(e,s),e.onResizeHandler=function(){j(e,s)},Object(l.addEvent)(window,"resize",e.onResizeHandler),!window.MutationObserver)return e;e.scrollContentObserver=new MutationObserver(e.onResizeHandler),e.scrollContentObserver.observe(s,{childList:!0,subtree:!0})}if(o){var c="#"+d+o,u=nav.cur.split("#")[0];nav.go(u+c,!1,{push_only:!0}),g[c]=e}return e},close:y});r.default;r.default._onOverlayClick=w;var _,p=((a={popup:"Popup",open:"Popup_open",wrap:"Popup__wrap",content:"Popup__content",hasScroll:"Popup_hasScroll",scrollView:"ScrollView",closing:"Popup--closing"}).content="Popup__content",a),f=((o={open:"."+p.open,popup:"."+p.popup,wrap:"."+p.wrap,content:"."+p.content,scroll:".Popup__scroll",header:".Popup__header",footer:".Popup__footer"}).content="."+p.content,o),b=!1,v=null,m=null,h=!1,g={},O=[];function w(e,t,n){var a=e.closest(f.popup);t&&i.default.handle(t,{$popup:a}),n&&y(a)}function j(e,t){var n=e.$(f.header),a=e.$(f.footer);t.scrollHeight-6>t.offsetHeight?(Object(l.addClass)(e,p.hasScroll),Object(l.addClass)(t,p.scrollView),ContentScrollView.restore()):(Object(l.removeClass)(e,p.hasScroll),Object(l.removeClass)(t,p.scrollView),t.scrollTop=0);var o=Object(l.getCh)(),r=0,i=0;n&&(r=n.offsetHeight),a&&(i=a.offsetHeight);var s=Math.min(o-r-i-100,420);Object(l.setStyle)(t,"max-height",s+"px")}function y(e,t){void 0===t&&(t={});var n=t,a=n.smooth,o=n.velocity,r=n.lastY;if(e&&!e.classList.contains(p.popup)&&(e=e.closest(f.popup)),e||(e=Object(s.$)(f.open)),e){var i=Object(s.$)(f.wrap,e),u=Object(s.$)(f.content,e);if(a&&o&&r){var _=Object(l.getH)(u),b=(_-r)*o.y;return b>=300&&(b=200),b=Math.max(150,Math.min(300,b)),l.setStyle.animate(i,"transform",{duration:b,func:"cubic-bezier(0.0, 0.0, 0.2, 1)"}),l.setStyle.transform(i,1,[0,_+"px"]),e.classList.add(p.closing),setTimeout((function(){y(e)}),1.1*b)}if(a){e.classList.add(p.closing);var v=Object(l.getH)(u);return l.setStyle.transform(i,1,[0,v+"px"]),setTimeout((function(){y(e)}),200*1.1)}if(e.classList.remove(p.open),e.appendedToBody&&document.body.contains(e)&&Object(l.replace)(e,e.original),e.classList.remove(p.closing),l.setStyle.transform(i),Object(l.removeEvent)(window,"resize",e.onResizeHandler),e.scrollContentObserver&&e.scrollContentObserver.disconnect(),Object(s.$)(f.open)||x(),nav.cur&&nav.cur.startsWith("#"+d)){var m=c.default.make(nav.path,qs2obj(nav.params));nav.set({nav:Object(l.extend)({},nav,{cur:nav.path,path:nav.path||"",push:m||""})})}var h,g=(h=e,(O.find((function(e){return e[0]===h}))||[])[1]);g&&(g(),B(e)),window.cur&&window.cur.app&&window.cur.app.frame&&window.cur.app.frame.focus()}}function k(e){if(window.MutationObserver&&!b){nav.saveScrollPosition();var t=document.body;v=t.style.overflow,b=!0,browser.ios||browser.ipad||(t.style.overflow="hidden"),h&&(t.style.height="100%",document.documentElement.style.overflow="hidden"),m=new MutationObserver((function(){t.contains(e)||x()})),_=Object(l.scrollTop)(),document.body&&(document.body.classList.add("fixed"),Object(l.setStyle)(document.body,{top:"-"+_+"px"}),browser.safari&&Object(l.getCw)()<882&&document.scrollingElement&&(document.scrollingElement.scrollTop=_,setTimeout((function(){document.scrollingElement.scrollTop=_}),100),setTimeout((function(){document.scrollingElement.scrollTop=_}),300))),m.observe(document.body,{attributes:!0,childList:!0,subtree:!0})}}function x(){window.MutationObserver&&b&&(document.body.style.overflow=v,h&&(document.documentElement.style.overflow="initial"),m.disconnect(),document.body&&(document.body.classList.remove("fixed"),Object(l.setStyle)(document.body,{top:""}),Object(l.scrollTop)(_)),b=!1)}function B(e){var t=O.findIndex((function(t){return t[0]===e}));t>=0&&O.splice(t,1)}nav.onPopState&&nav.onPopState((function(){var e=g[nav.cur];e&&(y(e),delete g[nav.cur])})),window.Popup=r.default;t.default=r.default},rc7J:function(e,t,n){"use strict";n.r(t);var a=n("z9sQ");var o=function(e){void 0===e&&(e={});var t=a.default.class("AlbumInfoRow",{withoutBottomBorder:e.withoutBottomBorder},"--");return{inner:[{inner:[{src:e.avatar,alt:"avatar",tag:"img"}],class:"AlbumInfoRow__avatar",href:e.author_url,onclick:"cancelEvent(event); nav.go(this);",tag:"a"},{inner:[{inner:[e.title],class:"AlbumInfoRow__title",href:e.url,tag:"a"},{inner:[e.subtitle],class:"AlbumInfoRow__subtitle",tag:"div"}],class:"AlbumInfoRow__content",tag:"div"}],class:t,onclick:"nav.go('"+e.url+"')",tag:"div"}};t.default=o},t7Ww:function(e,t,n){"use strict";n.r(t),n.d(t,"ModalMenuBtn",(function(){return s})),n.d(t,"ModalMenuContent",(function(){return _})),n.d(t,"ModalMenuIcon",(function(){return c})),n.d(t,"ModalMenuTitle",(function(){return d})),n.d(t,"ModalMenuBody",(function(){return l})),n.d(t,"ModalMenuHeaderCloseButton",(function(){return u}));var a=n("r/ag"),o=n("29dZ"),r=n("Y6JH"),i=n("fdw3");function s(e){var t=e.class?" "+e.class:"";return t=e.isBtn?Object(i.concatValues)(t," ModalMenu__customBtn"):Object(i.concatValues)(t," ModalMenu__item"),Object(o.default)({url:e.url,class:"ModalMenu__btn "+t,theme:e.theme?e.theme:"none",size:e.size?e.size:"",inner:e.inner,on_click:e.onclick,use_native_onclick:!0,attrs:e.attrs,"aria-label":e["aria-label"]||""})}function c(e){return{inner:[{inner:[e.inner],class:"ModalMenu__icon",tag:"div"}],class:"ModalMenu__iconWrapper",tag:"div"}}function l(e){return{inner:[e.inner],class:"ModalMenu__customBody",tag:"div"}}function d(e){return{inner:[e.inner],class:"ModalMenu__title",tag:"div"}}function u(e){return void 0===e&&(e={}),{inner:[Object(r.default)({sprite:"base",name:"dismiss_24"})],class:"ModalMenu__headerCloseButton",onClick:e.onClose?e.onClose:["ModalMenu.close","this"],"aria-label":Object(i.getLang)("mobile_close"),tag:"button"}}function _(e){return e.class+=" ModalMenuContent",e}t.default=function(e){var t=e.attached?"ModalMenu--attached":"",n=window.lang,r=[];if(e.title&&r.push({class:"ModalMenu__title",inner:e.title}),e.body&&r.push({class:"ModalMenu__body",inner:e.body}),Object(i.isArray)(e.items)){var s=e.items.map((function(e){return e}));r.push(s)}e.close&&r.push(Object(o.default)({class:"ModalMenu__btn ModalMenu__cancel",theme:"secondary",size:"large",inner:e.closeText?e.closeText:n.mobile_cancel,on_click:e.onClose?e.onClose:["ModalMenu.close","this"],use_native_onclick:!0}));var c=function(e){if(e&&e[0]&&e[0].inner&&e[0].inner.inner&&"ModalMenuHeader"===e[0].inner.inner[0].class)return!0;return!1}(r)?" ModalMenu--hasHeader":"";return Object(a.default)({id:e.id||"",class:"ModalMenu "+e.class+" "+t+" "+c,on_overlay_click_native:e.on_overlay_click?e.on_overlay_click:["ModalMenu.close","this"],content:r})}},tgcV:function(e,t,n){"use strict";function a(e){return new Promise((function(t,n){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.href=e,a.onload=function(){return t(a)},a.onerror=function(){return n(new Error("Stylesheet load error for "+e))},document.head.appendChild(a)}))}function o(e){var t,n=(t=e,new Promise((function(e,n){var a=new XMLHttpRequest;a.open("GET",t),a.onload=function(){200===a.status?e(a.response):n(a.response)},a.onerror=function(){n(a.response)},a.send()})));return n.then((function(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)})),n}var r;n.r(t),n.d(t,"addStatic",(function(){return _})),n.d(t,"preloadStaticForNavigation",(function(){return p})),n.d(t,"initStaticManager",(function(){return f}));var i=[];function s(e,t){var n=e;t&&(n+="?"+t);var a=new Promise((function(t,a){var o,r,i;o=n,r=function(n){n?(window.stManager.staticFiles[e]=null,a(n)):t()},(i=document.createElement("script")).src=o,i.onload=function(){return r(null,i)},i.onerror=function(){return r(new Error("Script load error for "+o))},document.head.appendChild(i)}));return window.stManager.staticFiles[e]=a,a}function c(e,t){var n=function(){if(void 0!==r)return r;try{var e=document.createElement("b");e.style.display="flex",r="flex"===e.style.display}catch(e){r=!1}return r}()?a:o,i=e;t&&(i+="?"+t);var s=n(i).catch((function(){return window.stManager.staticFiles[e]=null,Promise.resolve()}));return window.stManager.staticFiles[e]=s,s}function l(e){window.stManager.staticFiles[e]=Promise.resolve()}function d(){window.vk&&window.vk.stFiles&&window.stManager?(Object.keys(window.vk.stFiles).forEach((function(e){return l(e)})),window.vk.stFiles=[]):setTimeout(d,0)}function u(e){i[e]&&i[e]()}function _(e){return void 0===e&&(e={}),Promise.all(Object.keys(e).map((function(t){return n=t,a=e[t],window.stManager.staticFiles[n]||(n.includes(".js")?s(n,a):n.includes(".css")?c(n,a):Promise.resolve());var n,a})))}function p(e){var t=window.vk.stNavMap||{};for(var n in t){if(t.hasOwnProperty(n))if(new RegExp(n).test(e)){_(t[n]||{});break}}}function f(){d(),window.stManager={done:u,staticFiles:[],registerLoadedScript:l}}},tlMv:function(e,t,n){"use strict";n.r(t);var a=n("g3t9");t.default=a.default},uouo:function(e,t,n){"use strict";n.r(t);var a=n("wx14"),o=n("wZQE"),r=n.n(o),i=n("OcsD"),s=n("TYsd"),c=n("t7Ww"),l=n("r/ag"),d=n("fdw3"),u=n("aJgW"),_=n("lNyc"),p=n("9kLB"),f=function(e,t){return void 0===t&&(t=p.EVENT_STATES.FIRE),""+e+t},b={initVkAppModal:function(){var e={use_native_onclick:!0},t=Object(c.ModalMenuBtn)(Object(a.default)({},e,{class:"VKAppsMenu__action VKAppsMenu__action--qr",inner:Object(d.getLang)("vkapps_show_qr_code"),onclick:"VKAppModal.vkAppQRModalOpen()"})),n=Object(c.ModalMenuBtn)(Object(a.default)({},e,{class:"VKAppsMenu__action VKAppsMenu__action--notifications",inner:cur.VKApp.notificationsEnabled?Object(d.getLang)("vkapps_disable_notifications"):Object(d.getLang)("vkapps_allow_notifications"),onclick:"return VKApps.allowNotifications(this, "+!cur.VKApp.notificationsEnabled+");"})),o=Object(c.ModalMenuBtn)(Object(a.default)({},e,{class:cur.VKApp.canQuitVkApp?"VKAppsMenu__action VKAppsMenu__action--delete":"VKAppsMenu__action VKAppsMenu__action--add",inner:cur.VKApp.canQuitVkApp?Object(d.getLang)("vkapps_delete_service"):Object(d.getLang)("vkapps_add_service"),onclick:"return VKApps.deleteApp(this, "+cur.VKApp.canQuitVkApp+");"})),r=[t,n,o];cur.VKApp.canQuitVkApp||(r=[t,o]);var l=Object(c.default)({class:"VKAppsMenu__modal",type:"button",theme:"small",close:!0,closeText:Object(d.getLang)("mobile_cancel"),items:r});b.VkAppModal=Object(i.ceFromString)(s.default.html(l)),cur.VKApp.closeModal=function(){return ModalMenu.close(b.VkAppModal)}},initVkAppQRModal:function(){var e=this,t=window.location.href,n=u.colorScheme.isDarkScheme(),a={isShowLogo:!0},o=n?156:128;n&&(a.isShowBackground=!0,a.backgroundColor="#fff");var c=r.a.createQR(t,o,"",a),_=Object(l.default)({class:"VKAppsQRModal ModalMenu",hide_on_overlay_click:!0,content:{class:["vk_app_modal_container--qr","vk_app_modal_container--flex","MiniAppModalContainer__qr"],inner:[s.default.wrap(c),{inner:cur.backLang,tag:"h2",class:"PopupContentHeading MiniAppModalContainerQR__heading"},{inner:Object(d.getLang)("vkapps_focus_camera_on_qr_code"),tag:"p",class:"MiniAppModalContainerQR__text"},{tag:"button",class:"Btn Btn_size_large Btn_theme_secondary MiniAppsQrBtn",inner:Object(d.getLang)("vkapps_mvk_qr_done"),onclick:["VKAppModal.vkAppQRModalClose"]}]}});b.VkAppQRModal=Object(i.ceFromString)(s.default.html(_));var p=u.colorScheme.subscribe((function(){p(),e.initVkAppQRModal()}))},vkAppQRModalOpen:function(){b.vkAppModalClose(),b.VkAppQRModal=l.default.open(b.VkAppQRModal,!0),cur.app&&Object(_.sendMessage)({type:f(p.CONNECT_EVENTS.SHARE,p.EVENT_STATES.SUCCESS),data:{type:"qr"}},cur.app.cont)},vkAppQRModalClose:function(){l.default.close(cur.VkAppQRModal,!0)},vkAppModalOpen:function(){b.VkAppModal=l.default.open(b.VkAppModal,!0)},vkAppModalClose:function(){l.default.close(b.VkAppModal,!0)}};window.VKAppModal={vkAppModalOpen:b.vkAppModalOpen,vkAppQRModalOpen:b.vkAppQRModalOpen,vkAppQRModalClose:b.vkAppQRModalClose};var v=n("lMzL"),m=n("29dZ"),h=n("p8d5"),g=n("Y6JH"),O=function(){function e(e){void 0===e&&(e={}),this.props=e,this.closed=!0,this.qrClosed=!0}var t=e.prototype;return t.init=function(){var e={use_native_onclick:!0},t=cur.VKApp.isFavorite?"removeFavorite":"addFavorite",n=cur.VKApp.isFavorite?Object(d.getLang)("vkapps_remove_from_favorite"):Object(d.getLang)("vkapps_add_to_favorite"),o=Object(c.ModalMenuBtn)(Object(a.default)({},e,{class:"VKAppsMenu__action VKAppsMenu__action--"+t,inner:""+n,onclick:["VKApps.toggleFavorite","this","event"],attrs:{"data-is-favorite":+cur.VKApp.isFavorite,"data-app-id":+cur.aid,"data-hash":cur.app.options.hash,"data-app-name":cur.VKApp.name,"data-is-direct-game":"1"}})),r=Object(c.ModalMenuBtn)(Object(a.default)({},e,{class:"VKAppsMenu__action VKAppsMenu__action--qr",inner:Object(d.getLang)("vkapps_show_qr_code"),onclick:["DirectGames.showQr"]})),i=Object(c.ModalMenuBtn)(Object(a.default)({},e,{class:"VKAppsMenu__action VKAppsMenu__action--share",inner:Object(d.getLang)("vkapps_share"),onclick:"return VKApps.share()"})),l=Object(c.ModalMenuBtn)(Object(a.default)({},e,{class:"VKAppsMenu__action VKAppsMenu__action--delete",inner:Object(d.getLang)("vkapps_uninstall_game"),onclick:["DirectGames.removeGame"]})),u=[o,i];window.innerHeight>=320&&u.push(r),cur.VKApp.canQuitVkApp&&u.push(l);var _=Object(c.default)({class:"VKAppsMenu__modal",type:"button",theme:"small",close:!0,closeText:Object(d.getLang)("mobile_cancel"),items:u,on_overlay_click:["DirectGames.hideMenu"],onClose:["DirectGames.hideMenu"]});this._modal=s.default.elem(_),this._initQr()},t.show=function(){return this.closed=!1,this._modal=l.default.open(this._modal,!0),!1},t.showQr=function(){this.close(),this.qr=l.default.open(this.qr,!0),this.qrClosed=!1},t.close=function(){return this.closed=!0,l.default.close(this._modal),!1},t.closeQr=function(){l.default.close(this.qr),this.qrClosed=!0},t._initQr=function(){var e=arguments,t=this,n=window.location.href,a=Object(h.getCurrentOrientation)()===h.ORIENTATION_LANDSCAPE,o=u.colorScheme.isDarkScheme(),i={isShowLogo:!0};o&&(i.isShowBackground=!0,i.backgroundColor="#fff");var c=o?156:110,_=a?c:164,p=r.a.createQR(n,_,"",i),f=a?"VKAppsQRModal--landscape":"",b=Object(l.default)({class:"VKAppsQRModal ModalMenu "+f,content:{class:["vk_app_modal_container--qr","vk_app_modal_container--flex","MiniAppModalContainer__qr"],inner:[s.default.wrap(p),{inner:cur.backLang,tag:"h2",class:"PopupContentHeading MiniAppModalContainerQR__heading"},{inner:Object(d.getLang)("vkapps_focus_camera_on_qr_code"),tag:"p",class:"MiniAppModalContainerQR__text"},{tag:"a",class:"vk_app_modal_close_btn",inner:[Object(g.default)("common","cancel_outline_24")],onclick:["DirectGames.hideQr"]}],on_overlay_click:["DirectGames.hideQr"],onClose:["DirectGames.hideQr"]}});this.qr=s.default.elem(b);var v=u.colorScheme.subscribe((function(){v(),t._initQr.apply(t,e)}))},e}();var w=function(){function e(e){this.props=e;var t=function(e){var t=e.board.length<=3?"DirectGamesLeaderBoard--small":"";return{inner:[{inner:[{inner:[{src:e.pic,class:"DirectGamesLeaderBoard__appImg",tag:"img"}],class:"DirectGamesLeaderBoard__appImgContainer",tag:"div"},{inner:[{inner:[e.app_name],class:"DirectGamesLeaderBoard__name",tag:"h5"},{inner:[e.user_result],class:"DirectGamesLeaderBoard__result",tag:"span"}],class:"DirectGamesLeaderBoard__header",tag:"div"},{inner:[e.board.map((function(e){var t=window.vk.id===e.id?"DirectGamesLeaderBoard__profile--current":"";return{inner:[{src:e.img,alt:"","aria-label":e.name,class:"DirectGamesLeaderBoard__profileImage",tag:"img"},{inner:[{inner:[e.name],class:"DirectGamesLeaderBoard__profileName",tag:"span"},{inner:[e.score],class:"DirectGamesLeaderBoard__profileScore",tag:"span"}],class:"DirectGamesLeaderBoard__profileTexts",tag:"div"},e.place?Object(g.default)({sprite:"games",name:"dg_leader_board_badge_"+e.place+"_24"}):""],class:"DirectGamesLeaderBoard__profile "+t,href:e.href,tag:"a"}})),{inner:[{inner:[Object(g.default)({sprite:"games",name:"dg_leader_board_invite_24"})],class:"DirectGamesLeaderBoard__profileImage DirectGamesLeaderBoard__profileImage--invite",tag:"div"},{inner:[{inner:[Object(d.getLang)("vkapps_connect_leader_board_invite")],class:"DirectGamesLeaderBoard__profileName",tag:"span"},{inner:[Object(d.getLang)("vkapps_connect_leader_board_invite_desc")],class:"DirectGamesLeaderBoard__profileScore",tag:"span"}],class:"DirectGamesLeaderBoard__profileTexts",tag:"div"}],class:"DirectGamesLeaderBoard__profile DirectGamesLeaderBoard__invite",onclick:"DirectGames.showInviteBox()",tag:"a"}],class:"DirectGamesLeaderBoard__list",tag:"div"}],class:"DirectGamesLeaderBoard__content",tag:"div"}],class:"DirectGamesLeaderBoard "+t,tag:"div"}}(this.props.board),n=Object(c.default)({class:"ModalMenu--directGamesLeaderBoard",attached:!0,on_overlay_click:["DirectGames.closeLeaderBoard"],type:"button",theme:"small",close:!1,closeText:Object(d.getLang)("vkapps_connect_leader_board_play_again"),items:[t,{class:"DirectGamesLeaderBoard__footer",inner:[Object(m.default)({class:"ModalMenu__btn ModalMenu__cancel DirectGamesLeaderBoard__cancel",theme:"regular",size:"large",inner:Object(d.getLang)("vkapps_connect_leader_board_play_again"),on_click:["DirectGames.closeLeaderBoard"],use_native_onclick:!0})]}]});this._modal=Object(i.ceFromString)(s.default.html(n))}var t=e.prototype;return t.show=function(){this._modal=l.default.open(this._modal,!0)},t.close=function(){l.default.close(this._modal,!0),Object(i.isFunction)(this.props.onClose)&&this.props.onClose()},e}(),j=n("UxAg"),y=n("z9sQ"),k=n("9y81");var x=function(e){return{class:"inline_item DirectGamesInviteBox__item "+(e.selected?"inline_item_selected":""),attrs:{"data-id":e.id},inner:[{class:"ii_body",inner:[{tag:"a",href:e.href,class:"DirectGamesInviteBox__itemLink",inner:[{tag:"img",src:e.img,class:"ii_img DirectGamesInviteBox__itemPhoto"}]},{tag:"span",class:"ii_owner DirectGamesInviteBox__itemName",innerHTML:e.name}]}]}},B=n("UlUB"),C=function(){function e(e){var t=this;this._onListScroll=Object(B.throttle)((function(e){window.onBodyScroll(e.target.scrollHeight)}),33),this._handleItemClick=function(e){var n=e.target;(n=n.classList.contains("DirectGamesInviteBox__item")?n:Object(i.domCA)(n,".DirectGamesInviteBox__item"))&&(n.classList.toggle("inline_item_selected"),t.toggleFriend(+n.dataset.id))},this.box=Object(i.ceFromString)(s.default.html(function(){return{class:"Popup DirectGamesInviteBox",inner:[{class:"DirectGamesInviteBox__header",inner:[Object(m.default)({theme:"header",class:"DirectGamesInviteBox__headerButton DirectGamesInviteBox__headerButton--close",on_click:["DirectGames.closeInviteBox",!1],is_icon:!0,inner:Object(g.default)("base","cancel_outline_28")}),{tag:"span",class:"DirectGamesInviteBox__headerLabel",inner:[Object(d.getLang)("vkapps_connect_invite_header")]},Object(m.default)({theme:"header",class:"DirectGamesInviteBox__headerButton DirectGamesInviteBox__headerButton--done",on_click:["DirectGames.closeInviteBox",!0],is_icon:!0,inner:Object(g.default)("base","done_outline_28")})]},{class:"DirectGamesInviteBox__content",inner:[(e={class:"DirectGamesInviteBox__search",input_id:"DirectGamesInviteBox__search",placeholder:Object(d.getLang)("vkapps_connect_search_placeholder")},{class:[e.class,y.default.class("SearchPanel",{hasQuery:!!e.hasQuery})],tag:"label",attrs:{"data-id":e.id},inner:[{class:"SearchPanel__inputWrap",inner:{class:"SearchPanel__input",tag:"input",placeholder:e.placeholder,value:e.query||"",oninput:["SearchPanel._onInput","this",e.on_change],"data-scrollviewposition":"top",attrs:{id:e.input_id}}},{class:"SearchPanel__clear",onclick:["SearchPanel._onClearClick","this"],inner:s.default.wrap(Object(k.default)({mix:"SearchPanel__clearIcon",icon:"close20"}))},Object(m.default)({class:"SearchPanel__submit",inner:Object(g.default)({sprite:"base",name:"search_outline_20_primary"})})]}),{class:"DirectGamesInviteBox__list filter_peer_wrap",id:"DirectGamesInviteBox__list"}]}]};var e}())),this.friendsIds={},this.props=e,this.search=null}var t=e.prototype;return t.init=function(){var e=this,t=this;this.search=new window.QuickSearch({action:"/apps?act=get_invited_friends&app_id="+cur.aid,al_action:"/apps?act=get_invited_friends&app_id="+cur.aid,container:"DirectGamesInviteBox__list",field:"DirectGamesInviteBox__search",top_len:30,init_offset:30,al_need:!0,item_tpl:function(e,n,a,o){return s.default.html(x({name:this.highlight(Object(i.htsc)(e)),id:n,img:a,href:o,selected:t.friendsIds[n]}))},null_tpl:function(e){var t=Object(d.getLang)("mobile_friends_search_not_found").replace("%s",Object(i.htsc)(e));return e||(t=Object(d.getLang)("mobile_share_list_no_friends")),'\n            <div class="service_msg_box">\n                <div class="service_msg service_msg_null">'+t+"</div>\n            </div>"}}),this._initEventsListeners(),cur.destroy.push((function(){e._removeEventsListeners()}))},t.show=function(){this.box=l.default.open(this.box,!0),this.init()},t.toggleFriend=function(e){this.friendsIds[e]?delete this.friendsIds[e]:this.friendsIds[e]=!0},t.close=function(e){var t=Object.keys(this.friendsIds);e&&t.length?Object(i.isFunction)(this.props.onSuccess)&&this.props.onSuccess({friends_ids:t}):Object(i.isFunction)(this.props.onFail)&&this.props.onFail("cancel"),l.default.close(this.box),this._removeEventsListeners()},t._initEventsListeners=function(){Object(i.addEvent)(Object(j.$)(".DirectGamesInviteBox"),"click",this._handleItemClick),Object(i.addEvent)(Object(j.$)(".DirectGamesInviteBox__content"),"scroll",this._onListScroll)},t._removeEventsListeners=function(){Object(i.removeEvent)(Object(j.$)(".DirectGamesInviteBox"),"click",this._handleItemClick),Object(i.removeEvent)(Object(j.$)(".DirectGamesInviteBox__content"),"scroll",this._onListScroll)},e}();function A(e){return{class:"DirectGamesRequestBox",inner:[{class:"DirectGamesRequestBox__header",inner:[{tag:"span",class:"DirectGamesRequestBox__friendName",inner:[e.friend.name]},{tag:"span",class:"DirectGamesRequestBox__headerDesc",inner:[" ",Object(d.getLang)("vkapps_connect_request_box_subtitle")]}]},{class:"DirectGamesRequestBox__request",inner:[{tag:"img",class:"DirectGamesRequestBox__ava",src:e.user.photo},{class:"DirectGamesRequestBox__requestContent",inner:[{tag:"span",class:"DirectGamesRequestBox__authorName",inner:[e.user.name]},{tag:"span",class:"DirectGamesRequestBox__message",inner:[e.message]}]},{tag:"img",class:"DirectGamesRequestBox__ava DirectGamesRequestBox__gameAva",src:e.pic}]},{class:"DirectGamesRequestBox__footer",inner:[Object(m.default)({on_click:["DirectGames.closeRequestBox",!1],inner:Object(d.getLang)("mobile_cancel"),class:"DirectGamesRequestBox__btn",theme:"secondary"}),Object(m.default)({on_click:["DirectGames.closeRequestBox",!0],inner:Object(d.getLang)("vkapps_connect_request_box_send"),class:"DirectGamesRequestBox__btn"})]}]}}var S=function(){function e(e){this.props=e;var t=new A(e),n=Object(c.default)({class:"ModalMenu--directGamesRequestBox",on_overlay_click:["DirectGames.closeRequestBox"],items:[t]});this._modal=Object(i.ceFromString)(s.default.html(n))}var t=e.prototype;return t.show=function(){this._modal=l.default.open(this._modal,!0)},t.close=function(e){e&&Object(i.isFunction)(this.props.onSuccess)?this.props.onSuccess({friend_id:this.props.uid,message:this.props.message,request_key:this.props.requestKey}):Object(i.isFunction)(this.props.onFail)&&this.props.onFail("cancel"),l.default.close(this._modal,!0)},e}(),M=n("RQ7Z"),P=n("I3vf"),L=n("V4qE"),E=n("zouF"),I=function(){function e(){}return e.init=function(){if(e._isInit)console.warn("DirectGames already init");else{e.initMenu(),e.initHistory(),e._isInit=!0,e.checkConfirmOrder(),Object(h.onOrientationChanged)((function(){setTimeout((function(){e.hideMenu(),e.hideQr(),e.initMenu()}),300)})),e.onBeforeGoHandler=function(){e.destroy(),nav.onBeforeGo.off(e.onBeforeGoHandler)},nav.onBeforeGo(e.onBeforeGoHandler);var t=parseFloat(window.browser.version);e._isOldIosBrowser=(window.browser.ipad||window.browser.iphone)&&t<=9,window.cur&&window.cur.is_enabled_confirm_close&&(e._isEnabledCloseConfirm=!0)}},e.initMenu=function(){e._modalMenu.init()},e.initHistory=function(){e._historySupported=window.history&&window.history.pushState,e._historySupported&&(e._initPath=nav.path,cur.processNav=function(t){return t.nav.path===e._initPath},e.popStateHandler=function(){e._isOldIosBrowser&&!e._firstPopStatePassed||(e._firstPopStatePassed=!0,window.location.pathname===e._initPath&&(e.hasOpenedBox()?e.closeAll(!0):e.goBack(!0)))},e._initHistoryLen=window.history.length,nav.onPopState(e.popStateHandler))},e.confirmClose=function(){statlogsValueEvent("confirm_close_popup","exit_game_dialog_confirmed",+window.cur.aid),M.screenfull.isFullscreen&&M.screenfull.exit(),nav.go("/games")},e.rejectClose=function(){statlogsValueEvent("confirm_close_popup","exit_game_dialog_rejected",+window.cur.aid)},e.goBack=function(){if(e._isEnabledCloseConfirm)return statlogsValueEvent("confirm_close_popup","exit_game_dialog_show",+window.cur.aid),Object(E.Confirm)(getLang("mobile_apps_confirm_close_popup_title"),"DirectGames.confirmClose(); Popup.close(this);","DirectGames.rejectClose(); Popup.close(this);",{theme_accept_btn:"secondary",theme_close_btn:"regular",yes_label:getLang("mobile_direct_games_close")});M.screenfull.isFullscreen&&M.screenfull.exit(),nav.go("/games")},e.goBackHistory=function(t){if(e._historySupported){nav.onPopState.off(e.popStateHandler),cur.processNav=null;var n=e._initHistoryLen-window.history.length;t||n--,!n||window.history.length<=2?nav.go("/games"):window.history.go(n)}else nav.hard_go("/games")},e.destroy=function(){e.closeAll(),nav.onPopState.off(e.popStateHandler),cur.processNav=null,e._firstPopStatePassed=!1},e.onBoxOpen=function(t){e._historySupported&&(window.history.pushState({DGPopupOpened:!0},"",null),e._hasActiveBox=!0,t&&(e._latUIBox=t))},e.onBoxClose=function(){e._historySupported&&(window.history.pushState({DGPopupOpened:!1},"",null),e._hasActiveBox=!1,delete e._latUIBox)},e.showMenu=function(){e._modalMenu.show(),e.onBoxOpen()},e.showQr=function(){e.onBoxClose(),e.onBoxOpen(),e._modalMenu.showQr()},e.hideQr=function(){e._modalMenu.qrClosed||(e.onBoxClose(),e._modalMenu.closeQr())},e.hideMenu=function(){e._modalMenu.closed||(e._modalMenu.close(),e.onBoxClose())},e.showLeaderBoard=function(t){e._leaderBoard||(e.closeAll(),e._leaderBoard=new w(t),e._leaderBoard.show(),e.onBoxOpen())},e.closeLeaderBoard=function(){e._leaderBoard&&(e._leaderBoard.close(),delete e._leaderBoard,e.onBoxClose())},e.showInviteBox=function(t){void 0===t&&(t={}),e._inviteBox||(e.closeAll(),e._inviteBox=new C(t),e._inviteBox.show(),e.onBoxOpen())},e.closeInviteBox=function(t){e._inviteBox&&(e._inviteBox.close(t),delete e._inviteBox,e.onBoxClose())},e.showRequestBox=function(t){void 0===t&&(t={}),e._requestBox||(this.closeAll(),e._requestBox=new S(t),e._requestBox.show(),e.onBoxOpen())},e.closeRequestBox=function(t){e._requestBox&&(e._requestBox.close(t),delete e._requestBox,e.onBoxClose())},e.closeAll=function(t){e.hideMenu(),e.closeLeaderBoard(),e.closeInviteBox(),e.closeRequestBox(),e.hideQr(),e._latUIBox&&(e._latUIBox.props.onlyButtonHide&&t?e.onBoxOpen(e._latUIBox):e._latUIBox.close())},e.hasOpenedBox=function(){return e._hasActiveBox},e.checkConfirmOrder=function(){if(window.orderBoxHandler=new P.default({}),window.cur&&window.cur.app&&(window.cur.app.options.need_confirm_order||window.cur.app.options.need_make_order)){var e=new P.default({}),t="app_"+window.cur.aid+"_container";e.orderId=window.cur.app.options.need_order_id,e.confirmHash=window.cur.app.options.need_order_hash,e.orderHash=window.cur.app.options.need_order_confirm_hash;var n={appId:window.cur.aid,containerId:t};e.setData({containerId:t,item:window.cur.app.options.need_order_item_id},n),e.callback=function(e){Object(_.sendMessage)(e,window.cur.app.cont)},window.cur.app.options.need_make_order&&e.makeOrder(),window.cur.app.options.need_confirm_order&&e.confirmOrder()}},e.removeGame=function(){e.hideMenu(),Object(E.Confirm)(getLang("vkapps_game_remove_confirm"),["DirectGames.confirmRemoveGame","this"])},e.confirmRemoveGame=function(e){l.default.close(e),window.cur&&window.cur.app&&ajax.post("apps",{act:"vkapps_quit",app_id:window.cur.aid,quit:1,hash:window.cur.app.options.hash,from:"app"},{onDone:function(e){e&&(Object(L.init)({text:getLang("vkapps_game_removed")}),setTimeout((function(){nav.hard_go("/games")}),1e3))}})},e}();I._modalMenu=new O,I._leaderBoard=void 0,I._inviteBox=void 0,I._requestBox=void 0,I._initPath=void 0,I._initHistoryLen=void 0,I._hasActiveBox=!1,I._isEnabledCloseConfirm=!1,I._latUIBox=void 0,I._isInit=void 0,I._historySupported=void 0,I._isOldIosBrowser=!1,I._firstPopStatePassed=!1;var D=n("+cqQ"),R={favoriteChanged:Object(D.default)("appId","success"),initVkApp:function(e,t,n,a){R.initVkConnect("app_"+e+"_container",n,a,t,cur.app),R.initVkAppMvk()},initVkAppMvk:function(){if(cur.app){cur.app.isDirectGame?(window.DirectGames=I,I.init(),cur.destroy.push((function(){window.DirectGames&&(window.DirectGames.destroy(),delete window.DirectGames)}))):(document.body.classList.add("vk_app_layout"),"android"===cur.VKApp.platform&&document.body.classList.add("vk_app_android")),b.initVkAppModal(),b.initVkAppQRModal();var e=function(e){e&&cur.VKApp&&(cur.VKApp.isFavorite=!cur.VKApp.isFavorite),window.DirectGames&&window.DirectGames.initMenu()};R.favoriteChanged(e),cur.destroy.push((function(){R.favoriteChanged.off(e)}))}},initVkConnect:function(e,t,n,a,o){Object(v.default)(e,t,n,a,o)},addVkAppToCommunity:function(e,t,n){ajax.post("/apps",{act:"vkapps_add_to_community",api_hash:n,app_id:t,group_id:e},{onDone:function(e){e.hasOwnProperty("status")&&1===e.status?cur.vkAppAddToCommunitySuccessHandler({group_id:e.group_id}):cur.vkAppAddToCommunityErrorHandler(e)},onFail:function(e){cur.vkAppAddToCommunityErrorHandler(e)}})},allowNotifications:function(e,t){var n=Boolean(t)?1:0;m.default.setLoading(e,!0),ajax.post("apps.php",{act:"vkapps_allow_notifications",app_id:cur.aid,allow:n,hash:cur.app.options.hash},{onDone:function(n){cur.VKApp.notificationsEnabled=n,m.default.setLoading(e,!1),e.firstElementChild.innerText=cur.VKApp.notificationsEnabled?getLang("vkapps_disable_notifications"):getLang("vkapps_allow_notifications"),e.setAttribute("onclick","return VKApps.allowNotifications(this, "+!cur.VKApp.notificationsEnabled+");"),cur.VKApp.closeModal&&cur.VKApp.closeModal();var a=t?p.CONNECT_EVENTS.ALLOW_NOTIFICATIONS:p.CONNECT_EVENTS.DENY_NOTIFICATIONS;Object(_.sendMessage)({type:f(a,p.EVENT_STATES.SUCCESS),data:{result:!0}},cur.app.cont)}})},deleteApp:function(e,t){m.default.setLoading(e,!0);ajax.post("apps",{act:"vkapps_quit",app_id:cur.aid,quit:t?1:0,hash:cur.app.options.hash,from:"app"},{onDone:function(t){cur.app.isDirectGame&&nav.hard_go("/apps"),cur.VKApp.canQuitVkApp=t,t||nav.hard_go("/feed"),l.default.close(b.VkAppModal,!0),m.default.setLoading(e,!1),b.initVkAppModal()}})},cancelSettings:function(){hide("apps_box"),val("apps_box",""),show("apps_test_id"),cur.allowMessagesFromCommunityBox=!1,Object(i.isFunction)(cur.app.vkMiniAppShareFail)&&cur.app.vkMiniAppShareFail()},share:function(){return cur.app.funcs.shareBox("https://vk.com/app"+cur.aid,cur.appShareParams.sharePhoto,cur.appShareParams.shareTitle,cur.appShareParams.shareDesc),window.DirectGames&&window.DirectGames.hideMenu(),!1},toggleFavorite:function(e,t){cancelEvent(t),window.DirectGames&&window.DirectGames.hideMenu();var n=+e.dataset.isFavorite,a=e.dataset.hash,o=+e.dataset.appId,r=e.dataset.appName,i=function(e,t){var n;n=e?t?getLang("vkapps_game_added_to_favorite"):getLang("vkapps_game_removed_from_favorite"):t?getLang("vkapps_service_added_to_favorite"):getLang("vkapps_service_removed_from_favorite");return n}(+e.dataset.isDirectGame,!n);if(n){var s=getLang("vkapps_confirm_remove_from_favorite_text").replace("{app}",r);Object(E.Confirm)(s,["VKApps.confirmToggleFavorite","this",o,a,i],null,{title:getLang("vkapps_confirm_remove_from_favorite_title")})}else this.toggleFavoriteRequest(o,a).then((function(){Object(L.init)({text:i})})).catch((function(e){Object(L.init)({text:e})}))},confirmToggleFavorite:function(e,t,n,a){l.default.close(e),R.toggleFavoriteRequest(t,n).then((function(){Object(L.init)({text:a})})).catch((function(e){Object(L.init)({text:e})}))},toggleFavoriteRequest:function(e,t){return new Promise((function(n,a){ajax.post("apps",{act:"toggle_favorite",app_id:e,hash:t},{onDone:function(t,o){t?(R.favoriteChanged(!0,e),n(t)):(R.favoriteChanged(!1,e),a(o))},onFail:function(){R.favoriteChanged(!1,e),a()}})}))}};window.VKApps=R},"v+Uj":function(e,t,n){"use strict";n.r(t),n.d(t,"getCurrentElementIndex",(function(){return f})),n.d(t,"getElements",(function(){return p})),n.d(t,"scrollToElem",(function(){return _})),n.d(t,"_onWheel",(function(){return m}));var a=n("z9sQ");var o=function(e){return{class:[a.default.class("Slider",{snapping:!!e.snapping},"--"),e.class||e.mix],id:e.id,inner:{class:["Slider__scroll","_preventMenuOpen"],attrs:e.attrs,onwheel:["Slider._onWheel","event","this"],inner:{class:"Slider__line",attrs:{role:"presentation"},inner:e.inner}}}},r=n("OcsD"),i=n("UxAg"),s=n("jk6M");window.Slider={scrollToElem:_,nextElem:b,prevElem:v},Slider._onWheel=m,onDOMReady(g),onDOMReady((function(){onBodyResize(h)}));var c=".Slider",l=".Slider--snapping",d=".Slider__scroll",u=".Slider__line";function _(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n="center"),e){var a=e.closest(d),o=e.offsetLeft;"center"===n&&(o-=a.offsetWidth/2-e.offsetWidth/2);var i=0;if(window.getComputedStyle){var s=getComputedStyle(e);(s.scrollMarginLeft||s.scrollSnapMarginLeft)&&(i+=Object(r.toInt)(s.scrollMarginLeft||s.scrollSnapMarginLeft))}t&&a.scrollTo?(Object(r.domData)(a,"left",o-i),a.scrollTo({left:o-i,behavior:"smooth"})):a.scrollLeft=o-i}}function p(e){return e=Object(r.ge)(e),Object(i.$)(u,e).childNodes}function f(e,t){var n=Object(i.$)(d,e);return t||(t=p(e)),Array.from(t).map((function(e,t){return{index:t,scrollLeft:Math.abs(e.offsetLeft-n.scrollLeft)}})).sort((function(e,t){return e.scrollLeft-t.scrollLeft}))[0].index}function b(e,t,n){void 0===t&&(t=!1);var a=p(e=Object(r.ge)(e)),o=a[f(e,a)+1];b&&_(o,t,n)}function v(e,t,n){void 0===t&&(t=!1);var a=p(e=Object(r.ge)(e)),o=a[f(e,a)-1];o&&_(o,t,n)}function m(e,t){var n=e.deltaX,a=e.deltaY;Math.abs(n)>Math.abs(a)&&(e.preventDefault(),t.scrollLeft+=n)}function h(){var e=Object(i.$$)(l);Array.from(e).forEach((function(e){var t=Object(i.$)(d,e);t.scrollLeft=t.scrollLeft}))}function g(){(s.default.ios||s.default.msie_edge)&&(onDOMReady(w),window.page&&window.page.onChange(w),window.MutationObserver&&onDOMReady((function(){document.body&&new MutationObserver(O).observe(document.body,{subtree:!0,childList:!0})})))}function O(e){e.forEach((function(e){e.addedNodes.forEach((function(e){e.nodeType===Node.ELEMENT_NODE&&e.$$(c).forEach(j)}))}))}function w(){Object(i.$$)(c).forEach(j)}function j(e){var t=getComputedStyle(e),n=Number(t.paddingTop.replace("px","")),a=Number(t.paddingBottom.replace("px",""));e.style.overflow="hidden",e.style.height=e.offsetHeight-n-a+"px",e.$(d).style.paddingBottom="20px"}t.default=o;window.Slider=o,Object(r.extend)(o,{scrollToElem:_,nextElem:b,prevElem:v,_onWheel:m})},vOib:function(e,t,n){"use strict";n.r(t);var a=n("UWnA"),o=n("8ZMO"),r=n("KiYr"),i=n("z9sQ"),s=n("fdw3");function c(e){var t=[e];return Object(s.isArray)(e)&&(t=Object(s.wdToFlatArray)(e)),t.join("")}function l(e){var t=c(e);return!t||"<div></div>"===t}var d=function(e){if(void 0===e&&(e={}),e.content_only)return{outerHTML:c(e.content)};var t=e.title,n=e.corner||{},s=e.inner||e.content||e.children,d=e.anchor,u=e.alert,_=e.style||{},p=e.attrs||{},f=e.noShadow,b="gray";null!==e.count&&(b="black");var v=e.pageBlock?"PageBlock PageBlock--separate":"",m=[t];if(null!==e.count){var h={inner:[e.count],class:"Pad__count",tag:"span"};m.push(h)}return{tag:e.tag||"div",class:[e.class||e.mix,i.default.class("Pad",{empty:l(s),noBorder:e.no_border,noCapsTitle:e.no_caps_for_title,style_extraTopPadding:_.extra_top_padding,theme:b,noShadow:f}),v],attrs:p,"data-id":e.name||e.id,inner:[d?Object(o.default)({mix:"Pad__anchor",id:d}):null,u?Object(a.default)({inner:[Object(r.default)({inner:[u],class:"Pad__alert",theme:e.alert_theme})],style:{tiny_padding_bottom:!0}}):null,t?Object(a.default)({inner:[e.isHeaderPage?{inner:[m],class:"Pad__title",tag:"h1"}:{inner:[m],class:"Pad__title",tag:"h3"},n.url?{inner:[n.text],href:n.url,onClick:n.onclick,attrs:n.attrs,class:["Pad__corner",n.class],tag:"a"}:{inner:[n.text],href:n.url,onClick:n.onclick,attrs:n.attrs,class:["Pad__corner",n.class],tag:"div"}],class:"Pad__header"}):null,t?{inner:[s],class:["Pad__content",e.content_mix],tag:"div"}:s]}};t.default=d},vhZE:function(e,t,n){"use strict";n.r(t);var a=n("z9sQ"),o=n("z1UI"),r=n("Y6JH");var i=function(e){void 0===e&&(e={});var t={},n=e.raw||"",i=e.hash||"",s=e.text||"";"album"===(e.attachment_type||"")&&(e.height-=60),e.type&&"blur"!==e.type||(e.width>=250&&e.height>=250?e.type="blurWithText":e.type="blur"),("blur"===e.type||e.only_icon)&&(delete e.button,delete e.title),e.type&&(t[e.type]=!0);var c,l=a.default.class("PostPhotoRestriction",t,"--");"blur"!==e.type&&"blurWithText"!==e.type||(c=e.width<100||e.height<100?Object(r.default)({sprite:"wall",name:"hide_outline_28"}):Object(r.default)({sprite:"wall",name:"hide_outline_56"})),"block"===e.type&&(!e.forceText&&(e.width<300||e.height<250)&&(delete e.title,delete e.text),c=e.width<100||e.height<100?Object(r.default)({sprite:"wall",name:"block_outline_28"}):Object(r.default)({sprite:"wall",name:"do_not_disturb_outline_56"})),c={inner:[c],class:"SplashScreen__icon",tag:"div"},"block"!==e.type||e.title||(e.title=e.text);var d="PostPhotoRestriction.clear(this, event, '"+s+"', '"+e.button+"', '"+n+"', '"+i+"')";return{inner:[{inner:[Object(o.default)({title:e.title,icon_raw:c,more_text:e.button,more_type:"outlineMono",more_onclick:d,more_ontouchend:d,more_native_onclick:!0})],class:"PostPhotoRestriction__splash",tag:"div"}],class:l,tag:"div"}},s=n("he4e"),c=n("OcsD");window.PostPhotoRestriction={clear:s.clear,onClearConfirm:s.onClearConfirm,onClearDecline:s.onClearDecline};t.default=Object(c.extend)(i,{onClear:s.onClear,isCleared:s.isCleared})},vk58:function(e,t,n){"use strict";n.r(t);var a=n("29dZ"),o=n("fdw3"),r=n("z9sQ");var i=function(e){var t=e.btns||e.inner||[],n=e.mode||"horizontal",i=e.align||"start";Object(o.isArray)(e.inner)&&1===e.inner.length&&e.inner[0].length>1&&(t=e.inner[0]),e.nowrap&&(t=t.map((function(e){return e.nowrap=!0,e})));var s,c=r.default.class("BtnStack",{stretchOnSmallScreens:e.stretch_on_small_screens,table:e.nowrap,mode:n,align:i}),l=t.map((function(e){if(!e)return null;var t=["BtnStack__btn"];if(e.class&&t.push(e.class),e.mix&&t.push(e.mix),e.class=Object(o.arrayUnique)(Object(o.arrayFlat)(t)),!!e._&&e._.__is_wd_internal_data||Object(o.arrayIncludes)(t,"CellButton")||(e=Object(o.extend)(Object(a.default)(e),{nowrap:e.nowrap,is_icon:e.is_icon})),e.nowrap){var n=r.default.class("BtnStack__cell",{icon:e.is_icon});return delete e.nowrap,{inner:[e],class:n,tag:"div"}}return e}));return e.after&&(s={class:r.default.class("BtnStack__cell",e.after_mix),inner:e.after}),{inner:[l[0]?l:null,s],class:c,tag:"div"}};t.default=i},z1UI:function(e,t,n){"use strict";n.r(t);var a=n("k+Df");t.default=a.default},z9sQ:function(e,t,n){"use strict";n.r(t);n("OcsD");var a={class:function(e,t,n){void 0===t&&(t={});void 0===n&&(n="_");var a=[e];return Object.keys(t).forEach((function(r){if(o(r)){var i=t[r];!0===i?a.push(""+e+n+r):o(i)&&a.push(""+e+n+r+n+i)}})),a.join(" ")},setMod:function(e,t,n){var a,r=new RegExp("\\s*"+t+"(_[-a-zA-Z]+)?");a=!0===n?" "+t:o(n)?" "+t+"_"+n:"";r.test(e.className)?e.className=e.className.replace(r,a):e.className+=a}};function o(e){return"number"==typeof e||"string"==typeof e&&e}t.default=a;window.Bem=a},zouF:function(e,t,n){"use strict";n.r(t),n.d(t,"Confirm",(function(){return s}));var a=n("OcsD"),o=n("TYsd"),r=n("Po+v"),i=n("29dZ");function s(e,t,n,s){void 0===s&&(s={});var c=Object(a.ceFromString)(o.default.html(Object(r.default)({id:s.id,class:"Confirm",scrollable:!0,header:{title:s.title||getLang("mobile_warning_header")},on_overlay_click_native:n,content:[e,{class:"Popup__buttons",inner:[Object(i.default)({onClick:t,use_native_onclick:!0,class:"Popup__button",theme:s.theme_accept_btn||"regular",url:s.yes_href,inner:o.default.wrap(s.yes_label||getLang("mobile_continue"))}),Object(i.default)({onClick:n||"Popup.close(this)",use_native_onclick:!0,class:"Popup__button",theme:s.theme_close_btn||"secondary",url:s.no_href,inner:o.default.wrap(s.no_label||getLang("mobile_cancel"))})]}]})));r.default.open(c,!0)}window.page&&page.onChange((function(){$$(".Confirm").forEach((function(e){return r.default.close(e)}))})),window.Confirm=s},zvhO:function(e,t,n){"use strict";function a(e){return"number"==typeof e&&!isNaN(e)}n.r(t),n.d(t,"isNumber",(function(){return a}))}},[[23,"runtime","vendors","b-a8f7cf0af671e2a555da7b25524b9a42","b-35216c87a51105ca4c1dd702437ad9c1","b-4058e09ab5200ed1eb2e43364b82a2dd"]]]);